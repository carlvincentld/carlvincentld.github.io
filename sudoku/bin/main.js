(()=>{"use strict";class e{x;y;column;row;section;value;constructor(e,t,s,n,i){this.x=e,this.y=t,this.column=s,this.row=n,this.section=i,this.value=null}availableValues(){return this.section.intersect(this.column,this.row)}setValue(e){this.value=e,this.column.popValue(e),this.row.popValue(e),this.section.popValue(e)}unsetValue(){const e=this.value;return this.column.pushValue(e),this.row.pushValue(e),this.section.pushValue(e),this.value=null,e}position(e=0,t=0){return`${this.y-e},${this.x-t}`}}function t(e,t){return null==t&&(t=e,e=0),new Array(t-e).fill(0).map(((t,s)=>s+e))}function s(e){const t=Array.from(e);for(let e=t.length-1;e>0;e--){const s=Math.floor(Math.random()*(e+1));[t[e],t[s]]=[t[s],t[e]]}return t}function n(e,t){return Array.from(e).reduce(((e,s,n)=>{const i=t(s,n);return e.has(i)?e.get(i).push(s):e.set(i,[s]),e}),new Map)}class i{ord;availableValues;constructor(e,t){this.ord=t,this.availableValues=new o(1,e+1)}popValue(e){this.availableValues.unset(e)}pushValue(e){this.availableValues.reset(e)}intersect(...e){let t=this.availableValues;for(let s=0;s<e.length;s++)t=t.intersect(e[s].availableValues);return t.toArray()}}class o{_minimum;_maximum;_set;constructor(e,s){e instanceof o?(this._set=e._set.slice(0),this._minimum=e._minimum,this._maximum=e._maximum):(this._set=t(e,s),this._minimum=e,this._maximum=s)}unset(e){this._set[e-this._minimum]=null}reset(e){this._set[e-this._minimum]=e}intersect(e){const t=new o(this);for(let s=0;s<t._set.length;s++)t._set[s]=t._set[s]===e._set[s]?t._set[s]:null;return t}toArray(){const e=new Array;for(let t=0;t<this._set.length;t++)null!==this._set[t]&&e.push(this._set[t]);return e}}class r{WIDTH;HEIGHT;SECTION_COUNT;_columns;_rows;_sections;cells;cellsByPosition;MAX_VALUE;constructor(s,n,o){if(this.WIDTH=s,this.HEIGHT=n,this.SECTION_COUNT=o,9!==this.WIDTH||9!==this.HEIGHT||9!==this.SECTION_COUNT)throw new Error("Only 9x9 gris of 9 sections are supported");const r=this.WIDTH*this.HEIGHT/this.SECTION_COUNT;this.MAX_VALUE=r,this._columns=t(this.WIDTH).map((e=>new i(r,e))),this._rows=t(this.HEIGHT).map((e=>new i(r,e))),this._sections=t(this.SECTION_COUNT).map((e=>new i(r,e))),this.cells=t(this.WIDTH).flatMap((s=>t(this.HEIGHT).map((t=>new e(s,t,this._columns[s],this._rows[t],this._sections[Math.floor(s/3)+3*Math.floor(t/3)]))))),this.cellsByPosition=new Map(this.cells.map((e=>[e.position(),e])))}clone(){const e=new r(this.WIDTH,this.HEIGHT,this.SECTION_COUNT),t=(e,t)=>e.x!==t.x?t.x-e.x:t.y-e.y;e.cells.sort(t);const s=Array.from(this.cells).sort(t);for(let t=0;t<s.length;t++){const n=s[t];null!==n.value&&e.cells[t].setValue(n.value)}return e}prettyFormat(){const e=t(this.HEIGHT).map((()=>t(this.WIDTH)));for(let t=0;t<this.cells.length;t++){const s=this.cells[t];e[s.y][s.x]=`${s.value??" "}`}let s="";for(let t=0;t<e.length;t++){const n=e[t];for(let e=0;e<n.length;e++)s+=`${n[e]}, `;s+="\n"}return s}prettyFormatSection(){const e=t(this.HEIGHT).map((()=>t(this.WIDTH)));for(let t=0;t<this.cells.length;t++){const s=this.cells[t];e[s.y][s.x]=`${s.section.ord}`}let s="";for(let t=0;t<e.length;t++){const n=e[t];for(let e=0;e<n.length;e++)s+=`${n[e]}, `;s+="\n"}return s}validValues(){return t(1,this.MAX_VALUE+1)}}const l=1e5;class a{iteration=0;generate(e){this.iteration=0;const[t,s]=this.solve(e.clone());if(!t)return[t,s];const n=s.cells;for(let e=0;e<n.length;e++){const t=n[e],s=t.unsetValue();this.canSolveOtherWay(n,e,s)&&t.setValue(s)}return[t,s]}solve(e){const t=e.cells;return[this.innerSolve(t,e.cells.length-1),e]}innerSolve(e,t){if(this.iteration+=1,-1===t)return!0;const n=e[t];if(null!==n.value)return this.innerSolve(e,t-1);if(this.iteration>l)return!1;const i=s(n.availableValues());for(let s=0;s<i.length;s++){const o=i[s];if(n.setValue(o),this.innerSolve(e,t-1))return!0;n.unsetValue()}return!1}canSolveOtherWay(e,t,s){const n=e[t],i=n.availableValues();for(let o=0;o<i.length;o++){const r=i[o];if(s===r)continue;n.setValue(r);const l=this.canSolve(e,t-1);if(n.unsetValue(),l)return!0}return!1}canSolve(e,t){if(this.iteration+=1,-1===t)return!0;const s=e[t];if(null!==s.value)return this.canSolve(e,t-1);if(this.iteration>l)return!0;const n=s.availableValues();for(let i=0;i<n.length;i++){const o=n[i];if(s.setValue(o),this.canSolve(e,t-1))return s.unsetValue(),!0;s.unsetValue()}return!1}}class c extends Map{getOrDefault(e,t){return this.has(e)||this.set(e,t(e)),this.get(e)}}class h extends r{_cellsBySection;constructor(e,t,s,n=!1){var i,o;super(e,t,s),this._cellsBySection=(i=this.cells,o=e=>e.section,Array.from(i).reduce(((e,t,s)=>{const n=o(t);return e.has(n)?e.get(n).add(t):e.set(n,new Set([t])),e}),new Map)),n||this.shuffleSections()}clone(){const e=new h(this.WIDTH,this.HEIGHT,this.SECTION_COUNT,!0),t=new Map(function(e,t){const s=new Array,n=Math.max(e.length,t.length);for(let i=0;i<n;i++)s.push([e[i],t[i]]);return s}(this._sections,e._sections)),s=(e,t)=>e.x!==t.x?t.x-e.x:t.y-e.y;e.cells.sort(s);const n=Array.from(this.cells).sort(s);for(let s=0;s<n.length;s++){const i=n[s],o=e.cells[s];o.section=t.get(i.section),null!==i.value&&o.setValue(i.value)}return e}shuffleSections(){for(let e=0;e<64;e++)if(!this.swap())throw new Error("Was not able to swap sections")}swap(){const e=s(this._sections);for(const t of e){const e=new c,n=new Set;for(const s of this._cellsBySection.get(t))for(const i of this.neighbouringCells(s,this.cellsByPosition))i.section!==t&&(e.getOrDefault(i.section,(()=>new Set)).add(s),n.add(i));for(const t of s(n))for(const n of s(e.get(t.section))){if(this.swapSections(t,n,this._cellsBySection),this.isSectionContiguous(t.section,this._cellsBySection,this.cellsByPosition)&&this.isSectionContiguous(n.section,this._cellsBySection,this.cellsByPosition))return!0;this.swapSections(t,n,this._cellsBySection)}}return!1}neighbouringCells(e,t){return[e.position(-1,0),e.position(1,0),e.position(0,-1),e.position(0,1)].reduce(((e,s)=>{const n=t.get(s);return void 0!==n&&e.push(n),e}),new Array)}isSectionContiguous(e,t,s){const n=t.get(e),i=new Set,o=Array.from([n.values().next().value]);for(;o.length;){const t=o.pop();i.has(t)||(i.add(t),o.push(...this.neighbouringCells(t,s).filter((t=>t.section===e))))}return l=n,(r=i).size===l.size&&Array.from(r).every((e=>l.has(e)));var r,l}swapSections(e,t,s){s.get(e.section).delete(e),s.get(t.section).delete(t);const n=e.section;e.section=t.section,t.section=n,s.get(e.section).add(e),s.get(t.section).add(t)}}class u{}class d extends u{_actions;constructor(...e){super(),this._actions=e}do(){for(let e=0;e<this._actions.length;e++)this._actions[e].do()}undo(){for(let e=this._actions.length-1;e>=0;e--)this._actions[e].undo()}}class _{_previouses=[];_nexts=[];_callbacks=[];canUndo(){return 0!==this._previouses.length}undo(){if(0===this._previouses.length)throw new Error("No action can be undone");const e=this._previouses.pop();e.undo(),this._nexts.push(e),this.onActionCompleted()}canRedo(){return 0!==this._nexts.length}redo(){if(0===this._nexts.length)throw new Error("No action can be redone");const e=this._nexts.pop();e.do(),this._previouses.push(e),this.onActionCompleted()}do(e){this._previouses.push(e),e.do(),this._nexts.splice(0,this._nexts.length),this.onActionCompleted()}registerOnActionCompleted(e){this._callbacks.push(e)}onActionCompleted(){this._callbacks.forEach((e=>e()))}}class g extends u{static Instance=new g;do(){}undo(){}}class m extends u{_cell;_markings;constructor(e,t){super(),this._cell=e,this._markings=t}do(){this._markings.forEach((e=>{this._cell.addMarking(e)}))}undo(){this._markings.forEach((e=>{this._cell.removeMaking(e)}))}}class p extends m{constructor(e,t){super(e,t)}do(){super.undo()}undo(){super.do()}}class v extends u{_cell;_number;_previousNumber;constructor(e,t,s){super(),this._cell=e,this._number=t,this._previousNumber=s}do(){this._cell.writeValue(this._number)}undo(){this._cell.writeValue(this._previousNumber)}}class f extends v{constructor(e,t){super(e,null,t)}}const w="http://www.w3.org/2000/svg";class b{createSVG(){const e=document.createElementNS(w,"svg");return e.setAttribute("viewBox","0 0 9 9"),e.setAttribute("width","100%"),e.setAttribute("height","100%"),e}createPencilMarking(e,t,s){const n=9/t*((e-1)%t+.5),i=9/s*(Math.floor((e-1)/t)+.5),o=document.createElementNS(w,"text");return o.classList.add("pencil-marking"),o.setAttribute("font-size","3"),o.setAttribute("font-family","monospace"),o.setAttribute("font-style","italic"),o.setAttribute("font-weight","bold"),o.setAttribute("fill","currentColor"),o.setAttribute("text-anchor","middle"),o.setAttribute("dominant-baseline","central"),o.setAttribute("x",`${n}`),o.setAttribute("y",`${i}`),o.textContent=`${e}`,o}createPenMarking(e,t=!1){const s=this.createCustomText(`${e}`);return s.classList.add("pen-marking"),t?s.setAttribute("font-weight","bold"):(s.setAttribute("font-style","italic"),s.setAttribute("font-weight","normal")),s}createCustomText(e){const t=document.createElementNS(w,"text");return t.setAttribute("font-size","5"),t.setAttribute("font-family","monospace"),t.setAttribute("font-weight","bold"),t.setAttribute("fill","currentColor"),t.setAttribute("text-anchor","middle"),t.setAttribute("dominant-baseline","central"),t.setAttribute("x","4.5"),t.setAttribute("y","4.5"),t.innerHTML=e,t}}class C{_grid;_operations;_control;el;column;row;section;value;_isConstant;_markings;_onValueChanged;_svgGenerator=new b;_svg;constructor(e,t,s,n){if(this._grid=t,this._operations=s,this._control=n,this.column=e.column,this.row=e.row,this.section=e.section,this.value=e.value,this._markings=new Map,this._onValueChanged=[],this.el=document.createElement("td"),this._svg=this._svgGenerator.createSVG(),this.el.appendChild(this._svg),this.el.setAttribute("section",`${e.section.ord}`),t.cellsByPosition.get(e.position(1,0))?.section!==e.section&&this.el.classList.add("section-edge-top"),t.cellsByPosition.get(e.position(-1,0))?.section!==e.section&&this.el.classList.add("section-edge-bottom"),t.cellsByPosition.get(e.position(0,1))?.section!==e.section&&this.el.classList.add("section-edge-left"),t.cellsByPosition.get(e.position(0,-1))?.section!==e.section&&this.el.classList.add("section-edge-right"),this._isConstant=null!==e.value){this.el.classList.add("constant");const t=this._svgGenerator.createPenMarking(e.value,!0);this._svg.appendChild(t)}else this.el.addEventListener("click",this.onClick.bind(this))}registerOnValueChanged(e){this._onValueChanged.push(e)}removeMaking(e){if(!this._markings.has(e))return;const t=this._markings.get(e);this._svg.removeChild(t),this._markings.delete(e)}addMarking(e){if(this._markings.has(e))return;const t=this._svgGenerator.createPencilMarking(e,3,3);this._svg.appendChild(t),this._markings.set(e,t)}writeValue(e){this.value=e,null===e?this._svg.childNodes.forEach((e=>this._svg.removeChild(e))):this._svg.appendChild(this._svgGenerator.createPenMarking(e)),this.onValueChanged()}fillMarkingsAction(){return this._isConstant?g.Instance:new m(this,this._grid.validValues().filter((e=>!this._markings.has(e))))}onValueChanged(){this._onValueChanged.forEach((e=>e(this)))}onClick(){const e=this._control.selectedNumber;this._control.isPencilMarking()?null!==this.value?this._operations.do(new d(new f(this,this.value),new m(this,[e]))):this._markings.has(e)?this._operations.do(new p(this,[e])):this._operations.do(new m(this,[e])):this.value===e?this._operations.do(new f(this,this.value)):(this._operations.do(new d(new p(this,Array.from(this._markings.keys())),new v(this,e,this.value))),this._markings.clear())}}class y{el;get selectedNumber(){return this._selectedNumber}set selectedNumber(e){this._numbers[this._selectedNumber-1].classList.remove("active"),this._selectedNumber=e,this._numbers[this._selectedNumber-1].classList.add("active")}_selectedNumber=1;_isPencilMarking=!0;_numbers=new Array;_svgGenerator=new b;constructor(e,t,s){const n=document.createElement("div");n.classList.add("controls"),n.classList.add("pencil-mode");const i=this.createPencil();n.appendChild(i);for(let t=1;t<=e.MAX_VALUE;t++){const e=this.createNumber(t);e.title=`Selects number ${t} (shortcut: ${t})`,this._numbers.push(e),n.appendChild(e)}const o=this.createUndoButton(t),r=this.createRedoButton(t);t.registerOnActionCompleted((()=>{o.disabled=!t.canUndo(),r.disabled=!t.canRedo()})),n.appendChild(o),n.appendChild(r);const l=this.createFillMarkings();l.addEventListener("click",s),n.append(l),this.el=n}isPencilMarking(){return this._isPencilMarking}togglePencilMarking(){this._isPencilMarking=!this._isPencilMarking,this.el.classList.toggle("pencil-mode",this._isPencilMarking),this.el.classList.toggle("pen-mode",!this._isPencilMarking)}createNumber(e){const t=document.createElement("button");t.title=`Select ${e} (shortcut: ${e})`,t.classList.add("pencil-dependent"),e===this._selectedNumber&&t.classList.add("active");const s=this._svgGenerator.createSVG();return s.appendChild(this._svgGenerator.createPenMarking(e)),s.appendChild(this._svgGenerator.createPencilMarking(e,3,3)),t.appendChild(s),t.addEventListener("click",(()=>{this.selectedNumber=e})),t}createPencil(){const e=document.createElement("button");e.classList.add("pencil"),e.title="Toggle between pen and pencil (shortcut: space)",e.addEventListener("click",(()=>{this.togglePencilMarking()}));const t=this._svgGenerator.createSVG();return t.appendChild(this._svgGenerator.createCustomText("&#x270E")),e.appendChild(t),e}createUndoButton(e){const t=document.createElement("button");t.title="Undo (shortcut: CTRL+Z)",t.classList.add("undo"),t.disabled=!0,t.addEventListener("click",(()=>{e.undo()}));const s=this._svgGenerator.createSVG();return s.appendChild(this._svgGenerator.createCustomText("&#x293A")),t.appendChild(s),t}createRedoButton(e){const t=document.createElement("button");t.title="Redo (shortcut: CTRL+Y)",t.classList.add("redo"),t.disabled=!0,t.addEventListener("click",(()=>{e.redo()}));const s=this._svgGenerator.createSVG(),n=this._svgGenerator.createCustomText("&#x293A");return n.setAttribute("transform-origin","center"),n.setAttribute("transform","scale(-1, 1)"),s.appendChild(n),t.appendChild(s),t}createFillMarkings(){const e=document.createElement("button");e.title="Fill all markings",e.classList.add("pencil-independent");const t=this._svgGenerator.createSVG();for(let e=0;e<9;e++)t.appendChild(this._svgGenerator.createPencilMarking(e+1,3,3));return e.appendChild(t),e}}class k{el;_operations;_renderedCells;_cellsByColumn;_cellsByRow;_cellsBySection;constructor(e){this._operations=new _,this._renderedCells=new Array;const t=new y(e,this._operations,(()=>{this._operations.do(new d(...this._renderedCells.map((e=>e.fillMarkingsAction()))))})),s=this.createTable(e,t);this._cellsByColumn=n(this._renderedCells,(e=>e.column)),this._cellsByRow=n(this._renderedCells,(e=>e.row)),this._cellsBySection=n(this._renderedCells,(e=>e.section));const i=document.createElement("div");i.tabIndex=0,i.style.setProperty("--max-x","3"),i.style.setProperty("--max-y",`${Math.ceil(e.MAX_VALUE/3)}`),i.classList.add("sudoku"),i.appendChild(s),i.appendChild(t.el),i.addEventListener("keydown",(s=>{s.repeat||(1<=+s.key&&+s.key<=e.MAX_VALUE?(t.selectedNumber=+s.key,s.preventDefault()):" "===s.key?(t.togglePencilMarking(),s.preventDefault()):"z"===s.key&&s.ctrlKey?this._operations.canUndo()&&this._operations.undo():"y"===s.key&&s.ctrlKey&&this._operations.canRedo()&&this._operations.redo())})),this.el=i}createTable(e,t){const s=new Map(e.cells.map((e=>[`${e.y},${e.x}`,e]))),n=document.createElement("table");for(let i=0;i<e.HEIGHT;i++){const o=document.createElement("tr");n.appendChild(o);for(let n=0;n<e.WIDTH;n++){const r=s.get(`${i},${n}`),l=new C(r,e,this._operations,t);l.registerOnValueChanged(this.refreshValidation.bind(this)),this._renderedCells.push(l),o.appendChild(l.el)}}return n}refreshValidation(e){this.validateUniqueness(this._cellsByRow.get(e.row),"row"),this.validateUniqueness(this._cellsByColumn.get(e.column),"column"),this.validateUniqueness(this._cellsBySection.get(e.section),"section")}validateUniqueness(e,t){n(e,(e=>e.value)).forEach(((e,s)=>{null!==s&&e.length>1?e.map((e=>e.el)).forEach((e=>e.classList.add(`invalid-${t}`))):e.map((e=>e.el)).forEach((e=>e.classList.remove(`invalid-${t}`)))}))}}function A(){const e=document.getElementById("game");E("classical",e),document.getElementById("new-game-classical").addEventListener("click",(()=>setTimeout((()=>E("classical",e)),0))),document.getElementById("new-game-jigsaw").addEventListener("click",(()=>setTimeout((()=>E("jigsaw",e)),0)))}async function E(e,t){for(let s=1;s<=100;s++){t.innerHTML=`Trying to generate a grid: ${s} of 100 tries;`,await new Promise((e=>setTimeout(e,0)));const n="jigsaw"===e?new h(9,9,9):new r(9,9,9),i=new a,[o,l]=i.generate(n);if(!o)continue;const c=new k(l);return t.innerHTML="",t.appendChild(c.el),void console.log(`Generated a ${n.constructor.name} after ${s} tries.`)}t.innerHTML=`Failed to generate a ${e} grid after 100 tries;`}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",A):A()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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U0FBU3FGLGVBQWUsc0JBQ2hDNUQsaUJBQWlCLFNBQVMsSUFBTThELFlBQVcsSUFBTUQsRUFBVyxZQUFhRixJQUFPLEtBRTNFcEYsU0FBU3FGLGVBQWUsbUJBQ2hDNUQsaUJBQWlCLFNBQVMsSUFBTThELFlBQVcsSUFBTUQsRUFBVyxTQUFVRixJQUFPLElBQ3hGLENBRUFJLGVBQWVGLEVBQVdHLEVBQWtDQyxHQUszRCxJQUFLLElBQUk1TyxFQUFJLEVBQUdBLEdBdEJELElBc0JlQSxJQUFLLENBQ2xDNE8sRUFBVTlFLFVBQVksOEJBQThCOUosd0JBcEI5QyxJQUFJNk8sU0FBU0MsR0FBWUwsV0FBV0ssRUFBUyxLQXdCbkQsTUFBTXBMLEVBQW9CLFdBQWJpTCxFQUNWLElBQUkvSixFQVZNLEVBQ0MsRUFDTSxHQVNqQixJQUFJckMsRUFYTSxFQUNDLEVBQ00sR0FVZHdNLEVBQVksSUFBSWpMLEdBQ2ZHLEVBQVUrSyxHQUFhRCxFQUFVL0ssU0FBU04sR0FFakQsSUFBS08sRUFDSixTQUdELE1BQU1nTCxFQUFXLElBQUluQyxFQUFtQmtDLEdBSXhDLE9BSEFKLEVBQVU5RSxVQUFZLEdBQ3RCOEUsRUFBVW5FLFlBQVl3RSxFQUFTOUUsU0FDL0IrRSxRQUFRQyxJQUFJLGVBQWV6TCxFQUFLNUUsWUFBWXNRLGNBQWNwUCxXLENBSTNENE8sRUFBVTlFLFVBQVksd0JBQXdCNkUseUJBQy9DLENBRzRCLFlBQXhCekYsU0FBU21HLFdBQ1puRyxTQUFTeUIsaUJBQWlCLG1CQUFvQjBELEdBRTlDQSxHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc3Vkb2t1Ly4vc3JjL2dyaWQvY2VsbC50cyIsIndlYnBhY2s6Ly9zdWRva3UvLi9zcmMvaGVscGVycy9hcnJheS5oZWxwZXIudHMiLCJ3ZWJwYWNrOi8vc3Vkb2t1Ly4vc3JjL2dyaWQvY2VsbC1jb2xsZWN0aW9uLnRzIiwid2VicGFjazovL3N1ZG9rdS8uL3NyYy9ncmlkL2dyaWQudHMiLCJ3ZWJwYWNrOi8vc3Vkb2t1Ly4vc3JjL2dyaWQvZ3JpZC1nZW5lcmF0b3IudHMiLCJ3ZWJwYWNrOi8vc3Vkb2t1Ly4vc3JjL2hlbHBlcnMvZGVmYXVsdC1tYXAudHMiLCJ3ZWJwYWNrOi8vc3Vkb2t1Ly4vc3JjL2dyaWQvamlnc2F3LWdyaWQudHMiLCJ3ZWJwYWNrOi8vc3Vkb2t1Ly4vc3JjL2hlbHBlcnMvc2V0LmhlbHBlci50cyIsIndlYnBhY2s6Ly9zdWRva3UvLi9zcmMvcmVuZGVyZXIvYWN0aW9ucy9hY3Rpb24udHMiLCJ3ZWJwYWNrOi8vc3Vkb2t1Ly4vc3JjL3JlbmRlcmVyL2FjdGlvbnMvY29tcG9zaXRlLWFjdGlvbi50cyIsIndlYnBhY2s6Ly9zdWRva3UvLi9zcmMvcmVuZGVyZXIvb3BlcmF0aW9ucy50cyIsIndlYnBhY2s6Ly9zdWRva3UvLi9zcmMvcmVuZGVyZXIvYWN0aW9ucy9kby1ub3RoaW5nLWFjdGlvbi50cyIsIndlYnBhY2s6Ly9zdWRva3UvLi9zcmMvcmVuZGVyZXIvYWN0aW9ucy9tYXJraW5ncy1hY3Rpb24udHMiLCJ3ZWJwYWNrOi8vc3Vkb2t1Ly4vc3JjL3JlbmRlcmVyL2FjdGlvbnMvcGVuLWFjdGlvbi50cyIsIndlYnBhY2s6Ly9zdWRva3UvLi9zcmMvcmVuZGVyZXIvc3ZnLWdlbmVyYXRvci50cyIsIndlYnBhY2s6Ly9zdWRva3UvLi9zcmMvcmVuZGVyZXIvcmVuZGVyZWQtY2VsbC50cyIsIndlYnBhY2s6Ly9zdWRva3UvLi9zcmMvcmVuZGVyZXIvcmVuZGVyZWQtY29udHJvbHMudHMiLCJ3ZWJwYWNrOi8vc3Vkb2t1Ly4vc3JjL3JlbmRlcmVyL3JlbmRlcmVkLXN1ZG9rdS1ncmlkLnRzIiwid2VicGFjazovL3N1ZG9rdS8uL3NyYy9tYWluLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENlbGxDb2xsZWN0aW9uIH0gZnJvbSAnLi9jZWxsLWNvbGxlY3Rpb24nO1xuXG5leHBvcnQgdHlwZSBQb3NpdGlvbiA9IGAke251bWJlcn0sJHtudW1iZXJ9YDtcblxuZXhwb3J0IGNsYXNzIENlbGwge1xuXHR2YWx1ZTogbnVtYmVyIHwgbnVsbDtcblx0Y29uc3RydWN0b3IoXG5cdFx0cHVibGljIHJlYWRvbmx5IHg6IG51bWJlcixcblx0XHRwdWJsaWMgcmVhZG9ubHkgeTogbnVtYmVyLFxuXHRcdHB1YmxpYyBjb2x1bW46IENlbGxDb2xsZWN0aW9uLFxuXHRcdHB1YmxpYyByb3c6IENlbGxDb2xsZWN0aW9uLFxuXHRcdHB1YmxpYyBzZWN0aW9uOiBDZWxsQ29sbGVjdGlvblxuXHQpIHtcblx0XHR0aGlzLnZhbHVlID0gbnVsbDtcblx0fVxuXG5cdGF2YWlsYWJsZVZhbHVlcygpOiBudW1iZXJbXSB7XG5cdFx0cmV0dXJuIHRoaXMuc2VjdGlvbi5pbnRlcnNlY3QoXG5cdFx0XHR0aGlzLmNvbHVtbixcblx0XHRcdHRoaXMucm93XG5cdFx0KTtcblx0fVxuXG5cdHNldFZhbHVlKHZhbHVlOiBudW1iZXIpOiB2b2lkIHtcblx0XHR0aGlzLnZhbHVlID0gdmFsdWU7XG5cdFx0dGhpcy5jb2x1bW4ucG9wVmFsdWUodmFsdWUpO1xuXHRcdHRoaXMucm93LnBvcFZhbHVlKHZhbHVlKTtcblx0XHR0aGlzLnNlY3Rpb24ucG9wVmFsdWUodmFsdWUpO1xuXHR9XG5cblx0dW5zZXRWYWx1ZSgpOiBudW1iZXIge1xuXHRcdGNvbnN0IHZhbHVlID0gdGhpcy52YWx1ZSE7XG5cdFx0dGhpcy5jb2x1bW4ucHVzaFZhbHVlKHZhbHVlKTtcblx0XHR0aGlzLnJvdy5wdXNoVmFsdWUodmFsdWUpO1xuXHRcdHRoaXMuc2VjdGlvbi5wdXNoVmFsdWUodmFsdWUpO1xuXHRcdHRoaXMudmFsdWUgPSBudWxsO1xuXHRcdHJldHVybiB2YWx1ZTtcblx0fVxuXG5cdHBvc2l0aW9uKG9mZnNldFk6IG51bWJlciA9IDAsIG9mZnNldFg6IG51bWJlciA9IDApOiBQb3NpdGlvbiB7XG5cdFx0cmV0dXJuIGAke3RoaXMueSAtIG9mZnNldFl9LCR7dGhpcy54IC0gb2Zmc2V0WH1gO1xuXHR9XG59XG4iLCJleHBvcnQgZnVuY3Rpb24gcmFuZ2Uoc3RhcnQ6IG51bWJlciwgZW5kPzogbnVtYmVyKTogbnVtYmVyW10ge1xuXHRpZiAoZW5kID09PSBudWxsIHx8IGVuZCA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0ZW5kID0gc3RhcnQ7XG5cdFx0c3RhcnQgPSAwO1xuXHR9XG5cblx0cmV0dXJuIG5ldyBBcnJheShlbmQgLSBzdGFydClcblx0XHQuZmlsbCgwKVxuXHRcdC5tYXAoKF8sIGkpID0+IGkgKyBzdGFydCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1bmlxdWU8VD4oYXJyYXk6IEFycmF5PFQ+KTogQXJyYXk8VD4ge1xuXHRyZXR1cm4gQXJyYXkuZnJvbShuZXcgU2V0KGFycmF5KSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB6aXA8QSwgQj4oYTogQXJyYXk8QT4sIGI6IEFycmF5PEI+KTogQXJyYXk8W0EsIEJdPiB7XG5cdGNvbnN0IHJlc3VsdCA9IG5ldyBBcnJheTxbQSwgQl0+KCk7XG5cdGNvbnN0IG1heExlbmd0aCA9IE1hdGgubWF4KGEubGVuZ3RoLCBiLmxlbmd0aCk7XG5cdGZvciAobGV0IGkgPSAwOyBpIDwgbWF4TGVuZ3RoOyBpKyspIHtcblx0XHRyZXN1bHQucHVzaChbYVtpXSEsIGJbaV0hXSk7XG5cdH1cblx0cmV0dXJuIHJlc3VsdDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNodWZmbGU8VD4oYXJyYXk6IEl0ZXJhYmxlPFQ+KTogVFtdIHtcblx0Y29uc3QgcmVzdWx0ID0gQXJyYXkuZnJvbShhcnJheSk7XG5cdGZvciAobGV0IGkgPSByZXN1bHQubGVuZ3RoIC0gMTsgaSA+IDA7IGktLSkge1xuXHRcdGNvbnN0IGogPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAoaSArIDEpKTtcblx0XHRbcmVzdWx0W2ldLCByZXN1bHRbal1dID0gW3Jlc3VsdFtqXSEsIHJlc3VsdFtpXSFdO1xuXHR9XG5cdHJldHVybiByZXN1bHQ7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBncm91cEJ5PFQsIEs+KGl0ZXJhYmxlOiBJdGVyYWJsZTxUPiwga2V5RnVuYzogKHZhbHVlOiBULCBpbmRleDogbnVtYmVyKSA9PiBLKTogTWFwPEssIFRbXT4ge1xuXHRjb25zdCBhcnJheSA9IEFycmF5LmZyb20oaXRlcmFibGUpO1xuXHRyZXR1cm4gYXJyYXkucmVkdWNlKFxuXHRcdChhY2MsIGN1cnJlbnQsIGluZGV4KSA9PiB7XG5cdFx0XHRjb25zdCBrZXkgPSBrZXlGdW5jKGN1cnJlbnQsIGluZGV4KTtcblx0XHRcdGlmIChhY2MuaGFzKGtleSkpIHtcblx0XHRcdFx0YWNjLmdldChrZXkpIS5wdXNoKGN1cnJlbnQpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0YWNjLnNldChrZXksIFtjdXJyZW50XSk7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gYWNjO1xuXHRcdH0sXG5cdFx0bmV3IE1hcDxLLCBUW10+KClcblx0KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdyb3VwQnlTZXQ8VCwgSz4oaXRlcmFibGU6IEl0ZXJhYmxlPFQ+LCBrZXlGdW5jOiAodmFsdWU6IFQsIGluZGV4OiBudW1iZXIpID0+IEspOiBNYXA8SywgU2V0PFQ+PiB7XG5cdGNvbnN0IGFycmF5ID0gQXJyYXkuZnJvbShpdGVyYWJsZSk7XG5cdHJldHVybiBhcnJheS5yZWR1Y2UoXG5cdFx0KGFjYywgY3VycmVudCwgaW5kZXgpID0+IHtcblx0XHRcdGNvbnN0IGtleSA9IGtleUZ1bmMoY3VycmVudCwgaW5kZXgpO1xuXHRcdFx0aWYgKGFjYy5oYXMoa2V5KSkge1xuXHRcdFx0XHRhY2MuZ2V0KGtleSkhLmFkZChjdXJyZW50KTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGFjYy5zZXQoa2V5LCBuZXcgU2V0KFtjdXJyZW50XSkpO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIGFjYztcblx0XHR9LFxuXHRcdG5ldyBNYXA8SywgU2V0PFQ+PigpXG5cdCk7XG59IiwiaW1wb3J0IHsgcmFuZ2UgfSBmcm9tICcuLi9oZWxwZXJzL2FycmF5LmhlbHBlcic7XG5cbi8vIFRPRE86IEZpbmQgYSBiZXR0ZXIgbmFtZSwgc2luY2UgdGhleSBkb24ndCByZXByZXNlbnQgYSBjb2xsZWN0aW9uXG4vLyAgICAgICBSYXRoZXIgYSBjb25zdHJhaW50IHNldC5cbmV4cG9ydCBjbGFzcyBDZWxsQ29sbGVjdGlvbiB7XG5cdGF2YWlsYWJsZVZhbHVlczogUmFuZ2VTZXQ8MSwgbnVtYmVyPjtcblxuXHRjb25zdHJ1Y3Rvcih2YWx1ZUNvdW50OiBudW1iZXIsIHB1YmxpYyByZWFkb25seSBvcmQ6IG51bWJlcikge1xuXHRcdHRoaXMuYXZhaWxhYmxlVmFsdWVzID0gbmV3IFJhbmdlU2V0KDEsIHZhbHVlQ291bnQgKyAxKTtcblx0fVxuXG5cdHBvcFZhbHVlKHZhbHVlOiBudW1iZXIpOiB2b2lkIHtcblx0XHR0aGlzLmF2YWlsYWJsZVZhbHVlcy51bnNldCh2YWx1ZSk7XG5cdH1cblxuXHRwdXNoVmFsdWUodmFsdWU6IG51bWJlcik6IHZvaWQge1xuXHRcdHRoaXMuYXZhaWxhYmxlVmFsdWVzLnJlc2V0KHZhbHVlKTtcblx0fVxuXG5cdGludGVyc2VjdCguLi5hcmdzOiBDZWxsQ29sbGVjdGlvbltdKTogbnVtYmVyW10ge1xuXHRcdGxldCByZXN1bHQgPSB0aGlzLmF2YWlsYWJsZVZhbHVlcztcblx0XHRmb3IgKGxldCBpID0gMDsgaSA8IGFyZ3MubGVuZ3RoOyBpKyspIHtcblx0XHRcdHJlc3VsdCA9IHJlc3VsdC5pbnRlcnNlY3QoYXJnc1tpXSEuYXZhaWxhYmxlVmFsdWVzKTtcblx0XHR9XG5cdFx0cmV0dXJuIHJlc3VsdC50b0FycmF5KCk7XG5cdH1cbn1cblxuY2xhc3MgUmFuZ2VTZXQ8TWluaW11bSBleHRlbmRzIG51bWJlciwgTWF4aW11bSBleHRlbmRzIG51bWJlcj4ge1xuXHRwcml2YXRlIF9taW5pbXVtOiBudW1iZXI7XG5cdHByaXZhdGUgX21heGltdW06IG51bWJlcjtcblx0cHJpdmF0ZSBfc2V0OiBBcnJheTxudW1iZXIgfCBudWxsPjtcblxuXHRjb25zdHJ1Y3RvcihyZWZlcmVuY2U6IFJhbmdlU2V0PE1pbmltdW0sIE1heGltdW0+KTtcdFxuXHRjb25zdHJ1Y3RvcihtaW5pbXVtOiBNaW5pbXVtLCBtYXhpbXVtOiBNYXhpbXVtKTtcblx0Y29uc3RydWN0b3IoXG5cdFx0bWluaW11bTogTWluaW11bSB8IFJhbmdlU2V0PE1pbmltdW0sIE1heGltdW0+LFxuXHRcdG1heGltdW0/OiBNYXhpbXVtXG5cdCkge1xuXHRcdGlmIChtaW5pbXVtIGluc3RhbmNlb2YgUmFuZ2VTZXQpIHtcblx0XHRcdHRoaXMuX3NldCA9IG1pbmltdW0uX3NldC5zbGljZSgwKTtcblx0XHRcdHRoaXMuX21pbmltdW0gPSBtaW5pbXVtLl9taW5pbXVtO1xuXHRcdFx0dGhpcy5fbWF4aW11bSA9IG1pbmltdW0uX21heGltdW07XG5cdFx0fSBlbHNlIHtcblx0XHRcdHRoaXMuX3NldCA9IHJhbmdlKG1pbmltdW0sIG1heGltdW0pIGFzIHVua25vd25bXSBhcyBBcnJheTxudW1iZXIgfCBudWxsPjtcblx0XHRcdHRoaXMuX21pbmltdW0gPSBtaW5pbXVtO1xuXHRcdFx0dGhpcy5fbWF4aW11bSA9IG1heGltdW0hO1xuXHRcdH1cblx0fVxuXG5cdHVuc2V0KHZhbHVlOiBudW1iZXIpOiB2b2lkIHtcblx0XHR0aGlzLl9zZXRbdmFsdWUgLSB0aGlzLl9taW5pbXVtXSA9IG51bGw7XG5cdH1cblxuXHRyZXNldCh2YWx1ZTogbnVtYmVyKTogdm9pZCB7XG5cdFx0dGhpcy5fc2V0W3ZhbHVlIC0gdGhpcy5fbWluaW11bV0gPSB2YWx1ZTtcblx0fVxuXG5cdGludGVyc2VjdChvdGhlcjogUmFuZ2VTZXQ8TWluaW11bSwgTWF4aW11bT4pOiBSYW5nZVNldDxNaW5pbXVtLCBNYXhpbXVtPiB7XG5cdFx0Y29uc3QgcmVzdWx0ID0gbmV3IFJhbmdlU2V0KHRoaXMpO1xuXG5cdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCByZXN1bHQuX3NldC5sZW5ndGg7IGkrKykge1xuXHRcdFx0cmVzdWx0Ll9zZXRbaV0gPSByZXN1bHQuX3NldFtpXSA9PT0gb3RoZXIuX3NldFtpXVxuXHRcdFx0XHQ/IHJlc3VsdC5fc2V0W2ldIGFzIG51bWJlclxuXHRcdFx0XHQ6IG51bGw7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHJlc3VsdDtcblx0fVxuXG5cdHRvQXJyYXkoKTogbnVtYmVyW10ge1xuXHRcdGNvbnN0IF9yZXN1bHQgPSBuZXcgQXJyYXk8bnVtYmVyPigpO1xuXHRcdGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5fc2V0Lmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRpZiAodGhpcy5fc2V0W2ldICE9PSBudWxsKSB7XG5cdFx0XHRcdF9yZXN1bHQucHVzaCh0aGlzLl9zZXRbaV0gYXMgbnVtYmVyKTtcblx0XHRcdH1cblx0XHR9XG5cdFx0cmV0dXJuIF9yZXN1bHQ7XG5cdH1cbn1cbiIsImltcG9ydCB7IENlbGwsIFBvc2l0aW9uIH0gZnJvbSAnLi9jZWxsJztcbmltcG9ydCB7IENlbGxDb2xsZWN0aW9uIH0gZnJvbSAnLi9jZWxsLWNvbGxlY3Rpb24nO1xuaW1wb3J0IHsgcmFuZ2UgfSBmcm9tICcuLi9oZWxwZXJzL2FycmF5LmhlbHBlcic7XG5cbmV4cG9ydCB0eXBlIENlbGxzQnlQb3NpdGlvbiA9IFJlYWRvbmx5TWFwPFBvc2l0aW9uLCBDZWxsPjtcblxuZXhwb3J0IGNsYXNzIEdyaWQge1xuXHRwcm90ZWN0ZWQgX2NvbHVtbnM6IENlbGxDb2xsZWN0aW9uW107XG5cdHByb3RlY3RlZCBfcm93czogQ2VsbENvbGxlY3Rpb25bXTtcblx0cHJvdGVjdGVkIF9zZWN0aW9uczogQ2VsbENvbGxlY3Rpb25bXTtcblxuXHRyZWFkb25seSBjZWxsczogQ2VsbFtdO1xuXHRyZWFkb25seSBjZWxsc0J5UG9zaXRpb246IENlbGxzQnlQb3NpdGlvbjtcblx0cmVhZG9ubHkgTUFYX1ZBTFVFOiBudW1iZXI7XG5cblx0Y29uc3RydWN0b3IoXG5cdFx0cHVibGljIHJlYWRvbmx5IFdJRFRIOiBudW1iZXIsXG5cdFx0cHVibGljIHJlYWRvbmx5IEhFSUdIVDogbnVtYmVyLFxuXHRcdHB1YmxpYyByZWFkb25seSBTRUNUSU9OX0NPVU5UOiBudW1iZXJcblx0KSB7XG5cdFx0aWYgKFxuXHRcdFx0dGhpcy5XSURUSCAhPT0gOVxuXHRcdFx0fHwgdGhpcy5IRUlHSFQgIT09IDlcblx0XHRcdHx8IHRoaXMuU0VDVElPTl9DT1VOVCAhPT0gOSkge1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKCdPbmx5IDl4OSBncmlzIG9mIDkgc2VjdGlvbnMgYXJlIHN1cHBvcnRlZCcpO1xuXHRcdH1cblxuXHRcdGNvbnN0IHZhbHVlQ291bnQgPSB0aGlzLldJRFRIICogdGhpcy5IRUlHSFQgLyB0aGlzLlNFQ1RJT05fQ09VTlQ7XG5cdFx0dGhpcy5NQVhfVkFMVUUgPSB2YWx1ZUNvdW50O1xuXG5cdFx0dGhpcy5fY29sdW1ucyA9IHJhbmdlKHRoaXMuV0lEVEgpLm1hcCgoaSkgPT4gbmV3IENlbGxDb2xsZWN0aW9uKHZhbHVlQ291bnQsIGkpKTtcblx0XHR0aGlzLl9yb3dzID0gcmFuZ2UodGhpcy5IRUlHSFQpLm1hcCgoaSkgPT4gbmV3IENlbGxDb2xsZWN0aW9uKHZhbHVlQ291bnQsIGkpKTtcblx0XHR0aGlzLl9zZWN0aW9ucyA9IHJhbmdlKHRoaXMuU0VDVElPTl9DT1VOVCkubWFwKChpKSA9PiBuZXcgQ2VsbENvbGxlY3Rpb24odmFsdWVDb3VudCwgaSkpO1xuXG5cdFx0dGhpcy5jZWxscyA9IHJhbmdlKHRoaXMuV0lEVEgpXG5cdFx0XHQuZmxhdE1hcCh4ID0+IHJhbmdlKHRoaXMuSEVJR0hUKS5tYXAoeSA9PiB7XG5cdFx0XHRcdHJldHVybiBuZXcgQ2VsbChcblx0XHRcdFx0XHR4LFxuXHRcdFx0XHRcdHksXG5cdFx0XHRcdFx0dGhpcy5fY29sdW1uc1t4XSEsXG5cdFx0XHRcdFx0dGhpcy5fcm93c1t5XSEsXG5cdFx0XHRcdFx0dGhpcy5fc2VjdGlvbnNbXG5cdFx0XHRcdFx0XHRNYXRoLmZsb29yKHggLyAzKVxuXHRcdFx0XHRcdFx0KyAzICogTWF0aC5mbG9vcih5IC8gMyldISk7XG5cdFx0XHR9KSk7XG5cdFx0dGhpcy5jZWxsc0J5UG9zaXRpb24gPSBuZXcgTWFwKFxuXHRcdFx0dGhpcy5jZWxscy5tYXAoeCA9PiBbeC5wb3NpdGlvbigpLCB4XSlcblx0XHQpO1xuXHR9XG5cblx0Y2xvbmUoKTogR3JpZCB7XG5cdFx0Y29uc3QgcmVzdWx0ID0gbmV3IEdyaWQodGhpcy5XSURUSCwgdGhpcy5IRUlHSFQsIHRoaXMuU0VDVElPTl9DT1VOVCk7XG5cdFx0Y29uc3Qgb3JkZXJpbmcgPSAoYTogQ2VsbCwgYjogQ2VsbCkgPT4geyBcblx0XHRcdHJldHVybiBhLnggIT09IGIueCA/IGIueCAtIGEueCA6IGIueSAtIGEueTtcblx0XHR9O1xuXG5cdFx0cmVzdWx0LmNlbGxzLnNvcnQob3JkZXJpbmcpO1xuXHRcdGNvbnN0IGNlbGxzID0gQXJyYXkuZnJvbSh0aGlzLmNlbGxzKS5zb3J0KG9yZGVyaW5nKTtcblx0XHRmb3IgKGxldCBpID0gMDsgaSA8IGNlbGxzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRjb25zdCBjZWxsID0gY2VsbHNbaV0hO1xuXHRcdFx0aWYgKGNlbGwudmFsdWUgPT09IG51bGwpIHtcblx0XHRcdFx0Y29udGludWU7XG5cdFx0XHR9XG5cblx0XHRcdHJlc3VsdC5jZWxsc1tpXSEuc2V0VmFsdWUoY2VsbC52YWx1ZSk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHJlc3VsdDtcblx0fVxuXG5cdHByZXR0eUZvcm1hdCgpOiBzdHJpbmcge1xuXHRcdGNvbnN0IGdyaWQgPSByYW5nZSh0aGlzLkhFSUdIVCkubWFwKCgpID0+IHJhbmdlKHRoaXMuV0lEVEgpKSBhcyB1bmtub3duIGFzIHN0cmluZ1tdW107XG5cdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmNlbGxzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRjb25zdCBjZWxsID0gdGhpcy5jZWxsc1tpXSE7XG5cdFx0XHRncmlkW2NlbGwueV0hW2NlbGwueF0hID0gYCR7Y2VsbC52YWx1ZSA/PyAnICd9YDtcblx0XHR9XG5cblx0XHRsZXQgcmVzdWx0ID0gXCJcIjtcblx0XHRmb3IgKGxldCBpID0gMDsgaSA8IGdyaWQubGVuZ3RoOyBpKyspIHtcblx0XHRcdGNvbnN0IHJvdyA9IGdyaWRbaV0hO1xuXHRcdFx0Zm9yIChsZXQgaiA9IDA7IGogPCByb3cubGVuZ3RoOyBqKyspIHtcblx0XHRcdFx0Y29uc3QgdmFsdWUgPSByb3dbal0hO1xuXHRcdFx0XHRyZXN1bHQgKz0gYCR7dmFsdWV9LCBgO1xuXHRcdFx0fVxuXHRcdFx0cmVzdWx0ICs9ICdcXG4nO1xuXHRcdH1cblx0XHRyZXR1cm4gcmVzdWx0O1xuXHR9XG5cblx0cHJldHR5Rm9ybWF0U2VjdGlvbigpOiBzdHJpbmcgIHtcblx0XHRjb25zdCBncmlkID0gcmFuZ2UodGhpcy5IRUlHSFQpLm1hcCgoKSA9PiByYW5nZSh0aGlzLldJRFRIKSkgYXMgdW5rbm93biBhcyBzdHJpbmdbXVtdO1xuXHRcdGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5jZWxscy5sZW5ndGg7IGkrKykge1xuXHRcdFx0Y29uc3QgY2VsbCA9IHRoaXMuY2VsbHNbaV0hO1xuXHRcdFx0Z3JpZFtjZWxsLnldIVtjZWxsLnhdISA9IGAke2NlbGwuc2VjdGlvbi5vcmR9YDtcblx0XHR9XG5cblx0XHRsZXQgcmVzdWx0ID0gXCJcIjtcblx0XHRmb3IgKGxldCBpID0gMDsgaSA8IGdyaWQubGVuZ3RoOyBpKyspIHtcblx0XHRcdGNvbnN0IHJvdyA9IGdyaWRbaV0hO1xuXHRcdFx0Zm9yIChsZXQgaiA9IDA7IGogPCByb3cubGVuZ3RoOyBqKyspIHtcblx0XHRcdFx0Y29uc3QgdmFsdWUgPSByb3dbal0hO1xuXHRcdFx0XHRyZXN1bHQgKz0gYCR7dmFsdWV9LCBgO1xuXHRcdFx0fVxuXHRcdFx0cmVzdWx0ICs9ICdcXG4nO1xuXHRcdH1cblx0XHRyZXR1cm4gcmVzdWx0O1xuXHR9XG5cblx0dmFsaWRWYWx1ZXMoKTogbnVtYmVyW10ge1xuXHRcdHJldHVybiByYW5nZSgxLCB0aGlzLk1BWF9WQUxVRSArIDEpO1xuXHR9XG59XG5cbiIsImltcG9ydCB7IEdyaWQgfSBmcm9tICcuL2dyaWQnO1xuaW1wb3J0IHsgQ2VsbCB9IGZyb20gJy4vY2VsbCc7XG5pbXBvcnQgeyBzaHVmZmxlIH0gZnJvbSAnLi4vaGVscGVycy9hcnJheS5oZWxwZXInO1xuXG5jb25zdCBJVEVSQVRJT05fTElNSVQgPSAxMDBfMDAwO1xuXG5leHBvcnQgY2xhc3MgR3JpZEdlbmVyYXRvciB7XG5cdGl0ZXJhdGlvbjogbnVtYmVyID0gMDtcblxuXHQvKipcblx0ICogR2VuZXJhdGVzIGEgc3Vkb2t1IGdyaWQgYmFzZWQgb24gYW4gZXhpc3RpbmcgZ3JpZC5cblx0ICogUmV2ZWFsZWQgbnVtYmVycyBpbiB0aGUgaW5pdGlhbCBncmlkIG1pZ2h0IG5vdCBiZSBzaG93biBpbiB0aGUgc29sdmVkIGdyaWRcblx0ICpcblx0ICogQHBhcmFtIGdyaWQgSW5pdGlhbCBncmlkIHRvIGJhc2UgdGhlIHNvbHV0aW9uXG5cdCAqIEByZXR1cm5zIEdyaWQgbWVhbnQgdG8gYmUgc29sdmVkXG5cdCAqL1xuXHRnZW5lcmF0ZShncmlkOiBHcmlkKTogW2Jvb2xlYW4sIEdyaWRdIHtcblx0XHR0aGlzLml0ZXJhdGlvbiA9IDA7XG5cblx0XHRjb25zdCBbY2FuU29sdmUsIHNvbHV0aW9uXSA9IHRoaXMuc29sdmUoZ3JpZC5jbG9uZSgpKTtcblxuXHRcdGlmICghY2FuU29sdmUpIHtcblx0XHRcdHJldHVybiBbY2FuU29sdmUsIHNvbHV0aW9uXTtcblx0XHR9XG5cblx0XHRjb25zdCBjZWxscyA9IHNvbHV0aW9uLmNlbGxzO1xuXHRcdGZvciAobGV0IGkgPSAwOyBpIDwgY2VsbHMubGVuZ3RoOyBpKyspIHtcblx0XHRcdGNvbnN0IGNlbGwgPSBjZWxsc1tpXSE7XG5cdFx0XHRjb25zdCB2YWx1ZSA9IGNlbGwudW5zZXRWYWx1ZSgpO1xuXG5cdFx0XHRpZiAodGhpcy5jYW5Tb2x2ZU90aGVyV2F5KGNlbGxzLCBpLCB2YWx1ZSkpIHtcblx0XHRcdFx0Y2VsbC5zZXRWYWx1ZSh2YWx1ZSk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIFtjYW5Tb2x2ZSwgc29sdXRpb25dO1xuXHR9XG5cblx0LyoqXG5cdCAqIEdlbmVyYXRlcyBhIHNvbHV0aW9uIGZvciB0aGUgZ2l2ZW4gZ3JpZC5cblx0ICpcblx0ICogQHBhcmFtIGdyaWQgR3JpZCB0byBtb2RpZnkgdG8gY29udGFpbiB0aGUgc29sdXRpb25cblx0ICogQHJldHVybnMgdGhlIHNvbHZlZCBncmlkXG5cdCAqL1xuXHRwcml2YXRlIHNvbHZlKGdyaWQ6IEdyaWQpOiBbYm9vbGVhbiwgR3JpZF0ge1xuXHRcdGNvbnN0IGNlbGxzID0gZ3JpZC5jZWxscztcblx0XHRjb25zdCBjYW5Tb2x2ZSA9IHRoaXMuaW5uZXJTb2x2ZShjZWxscywgZ3JpZC5jZWxscy5sZW5ndGggLSAxKTtcblx0XHRyZXR1cm4gW2NhblNvbHZlLCBncmlkXTtcblx0fVxuXG5cdC8qKlxuXHQgKiBHZW5lcmF0ZXMgYSBzb2x1dGlvbiBmb3IgdGhlIGdpdmVuIGdyaWQuIEFzc3VtZXMgZXZlciBjZWxsIGF0IGluZGV4ID4gY3VycmVudCBpbmRleCBhcmUgc2V0LlxuXHQgKiBNb2RpZmllcyB0aGUgdmFsdWVzIG9mIHRoZSBjZWxscy5cblx0ICpcblx0ICogQHBhcmFtIGNlbGxzIExpc3Qgb2YgY2VsbHMgcmVwcmVzZW50aW5nIHRoZSBncmlkXG5cdCAqIEBwYXJhbSBpbmRleCBJbmRleCBvZiB0aGUgY3VycmVudCBjZWxsXG5cdCAqIEByZXR1cm5zIHRydWUgaWYgYSBzb2x1dGlvbiBoYXMgYmVlbiBmb3VuZCwgZmFsc2Ugb3RoZXJ3aXNlXG5cdCAqL1xuXHRwcml2YXRlIGlubmVyU29sdmUoY2VsbHM6IENlbGxbXSwgaW5kZXg6IG51bWJlcik6IGJvb2xlYW4ge1xuXHRcdHRoaXMuaXRlcmF0aW9uICs9IDE7XG5cdFx0aWYgKGluZGV4ID09PSAtMSkge1xuXHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0fVxuXG5cdFx0Y29uc3QgY2VsbCA9IGNlbGxzW2luZGV4XSE7XG5cdFx0aWYgKGNlbGwudmFsdWUgIT09IG51bGwpIHtcblx0XHRcdHJldHVybiB0aGlzLmlubmVyU29sdmUoY2VsbHMsIGluZGV4IC0gMSk7XG5cdFx0fVxuXG5cdFx0aWYgKHRoaXMuaXRlcmF0aW9uID4gSVRFUkFUSU9OX0xJTUlUKSB7XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXG5cdFx0Y29uc3QgdmFsdWVzID0gc2h1ZmZsZShjZWxsLmF2YWlsYWJsZVZhbHVlcygpKTtcblx0XHRmb3IgKGxldCBpID0gMDsgaSA8IHZhbHVlcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0Y29uc3QgdmFsdWUgPSB2YWx1ZXNbaV0hO1xuXHRcdFx0Y2VsbC5zZXRWYWx1ZSh2YWx1ZSk7XG5cdFx0XHRpZiAodGhpcy5pbm5lclNvbHZlKGNlbGxzLCBpbmRleCAtIDEpKSB7XG5cdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0fVxuXHRcdFx0Y2VsbC51bnNldFZhbHVlKCk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cblx0LyoqXG5cdCAqIENoZWNrcyB3ZXRoZXIgYSBzb2x1dGlvbiBleGlzdHMsIGFzc3VtaW5nIGV2ZXJ5IGNlbGwgYXQgaW5kZXggPiBjdXJyZW50IGluZGV4IGFyZSBzZXRcblx0ICogU2tpcHMgdGhlIGdpdmVuIHZhbHVlIGZvciB0aGUgY3VycmVudCBjZWxsXG5cdCAqXG5cdCAqIEBwYXJhbSBjZWxscyBMaXN0IG9mIGNlbGxzIHJlcHJlc2VudGluZyB0aGUgZ3JpZFxuXHQgKiBAcGFyYW0gaW5kZXggSW5kZXggb2YgdGhlIGN1cnJlbnQgY2VsbFxuXHQgKiBAcGFyYW0gc2VsZWN0ZWRWYWx1ZSBWYWx1ZSB0byBza2lwIGR1cmluZyB0aGUgdmFsaWRpdHkgY2hlY2tcblx0ICogQHJldHVybnMgdHJ1ZSBpZiB0aGVyZSBleGlzdHMgYSBzb2x1dGlvbiBmb3IgdGhlIGdpdmVuIGdyaWQgb3IgdGhlIGl0ZXJhdGlvbiBsaW1pdCBoYXMgYmVlbiBhY2hpZXZlZFxuXHQgKi9cblx0cHJpdmF0ZSBjYW5Tb2x2ZU90aGVyV2F5KGNlbGxzOiBDZWxsW10sIGluZGV4OiBudW1iZXIsIHNlbGVjdGVkVmFsdWU6IG51bWJlcik6IGJvb2xlYW4ge1xuXHRcdGNvbnN0IGNlbGwgPSBjZWxsc1tpbmRleF0hO1xuXG5cdFx0Y29uc3QgdmFsdWVzID0gY2VsbC5hdmFpbGFibGVWYWx1ZXMoKTtcblx0XHRmb3IgKGxldCBpID0gMDsgaSA8IHZhbHVlcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0Y29uc3QgdmFsdWUgPSB2YWx1ZXNbaV0hO1xuXHRcdFx0aWYgKHNlbGVjdGVkVmFsdWUgPT09IHZhbHVlKSB7XG5cdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0fVxuXG5cdFx0XHRjZWxsLnNldFZhbHVlKHZhbHVlKTtcblx0XHRcdGNvbnN0IHNvbHZlZCA9IHRoaXMuY2FuU29sdmUoY2VsbHMsIGluZGV4IC0gMSk7XG5cdFx0XHRjZWxsLnVuc2V0VmFsdWUoKTtcblxuXHRcdFx0aWYgKHNvbHZlZCkge1xuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblxuXHQvKipcblx0ICogQ2hlY2tzIHdldGhlciBhIHNvbHV0aW9uIGV4aXN0cywgYXNzdW1lcyBldmVyeSBjZWxscyBhdCBpbmRleCA+IGN1cnJlbnQgaW5kZXggdG8gYmUgc2V0XG5cdCAqXG5cdCAqIEBwYXJhbSBjZWxscyBMaXN0IG9mIGNlbGxzIHJlcHJlc2VudGluZyB0aGUgZ3JpZFxuXHQgKiBAcGFyYW0gaW5kZXggSW5kZXggb2YgdGhlIGN1cnJlbnQgY2VsbFxuXHQgKiBAcmV0dXJucyB0cnVlIGlmIHRoZXJlIGlzIGEgc29sdXRpb24gZm9yIHRoZSBnaXZlbiBncmlkIG9yIHRoZSBpdGVyYXRpb24gbGltaXQgaGFzIGJlZW4gYWNoaWV2ZWRcblx0ICovXG5cdHByaXZhdGUgY2FuU29sdmUoY2VsbHM6IENlbGxbXSwgaW5kZXg6IG51bWJlcik6IGJvb2xlYW4ge1xuXHRcdHRoaXMuaXRlcmF0aW9uICs9IDE7XG5cdFx0aWYgKGluZGV4ID09PSAtMSkge1xuXHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0fVxuXG5cdFx0Y29uc3QgY2VsbCA9IGNlbGxzW2luZGV4XSE7XG5cdFx0aWYgKGNlbGwudmFsdWUgIT09IG51bGwpIHtcblx0XHRcdHJldHVybiB0aGlzLmNhblNvbHZlKGNlbGxzLCBpbmRleCAtIDEpO1xuXHRcdH1cblxuXHRcdGlmICh0aGlzLml0ZXJhdGlvbiA+IElURVJBVElPTl9MSU1JVCkge1xuXHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0fVxuXG5cdFx0Y29uc3QgdmFsdWVzID0gY2VsbC5hdmFpbGFibGVWYWx1ZXMoKTtcblx0XHRmb3IgKGxldCBpID0gMDsgaSA8IHZhbHVlcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0Y29uc3QgdmFsdWUgPSB2YWx1ZXNbaV0hO1xuXHRcdFx0Y2VsbC5zZXRWYWx1ZSh2YWx1ZSk7XG5cdFx0XHRpZiAodGhpcy5jYW5Tb2x2ZShjZWxscywgaW5kZXggLSAxKSkge1xuXHRcdFx0XHRjZWxsLnVuc2V0VmFsdWUoKTtcblx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHR9XG5cdFx0XHRjZWxsLnVuc2V0VmFsdWUoKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cbn1cbiIsImV4cG9ydCBjbGFzcyBEZWZhdWx0TWFwPEssIFY+IGV4dGVuZHMgTWFwPEssIFY+IHtcbiAgICBnZXRPckRlZmF1bHQoa2V5OiBLLCBmbjogKGtleTogSykgPT4gVik6IFYge1xuICAgICAgICBpZiAoIXRoaXMuaGFzKGtleSkpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0KGtleSwgZm4oa2V5KSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5nZXQoa2V5KSE7XG4gICAgfVxufSIsImltcG9ydCB7IGdyb3VwQnlTZXQsIHNodWZmbGUsIHppcCB9IGZyb20gXCIuLi9oZWxwZXJzL2FycmF5LmhlbHBlclwiO1xuaW1wb3J0IHsgRGVmYXVsdE1hcCB9IGZyb20gXCIuLi9oZWxwZXJzL2RlZmF1bHQtbWFwXCI7XG5pbXBvcnQgeyBlcXVpdmFsZW50IH0gZnJvbSBcIi4uL2hlbHBlcnMvc2V0LmhlbHBlclwiO1xuaW1wb3J0IHsgQ2VsbCB9IGZyb20gXCIuL2NlbGxcIjtcbmltcG9ydCB7IENlbGxDb2xsZWN0aW9uIH0gZnJvbSBcIi4vY2VsbC1jb2xsZWN0aW9uXCI7XG5pbXBvcnQgeyBDZWxsc0J5UG9zaXRpb24sIEdyaWQgfSBmcm9tIFwiLi9ncmlkXCI7XG5cbmNvbnN0IElURVJBVElPTl9DT1VOVCA9IDY0O1xuXG50eXBlIFNlY3Rpb24gPSBDZWxsQ29sbGVjdGlvbjtcbnR5cGUgQ2VsbHNCeVNlY3Rpb24gPSBSZWFkb25seU1hcDxTZWN0aW9uLCBTZXQ8Q2VsbD4+O1xudHlwZSBQb3NpdGlvbiA9IGAke251bWJlcn0sJHtudW1iZXJ9YDtcblxuZXhwb3J0IGNsYXNzIEppZ3Nhd0dyaWQgZXh0ZW5kcyBHcmlkIHtcblxuICAgIHByaXZhdGUgcmVhZG9ubHkgX2NlbGxzQnlTZWN0aW9uOiBDZWxsc0J5U2VjdGlvbjtcblxuICAgIGNvbnN0cnVjdG9yKFxuXHRcdFdJRFRIOiBudW1iZXIsXG5cdFx0SEVJR0hUOiBudW1iZXIsXG5cdFx0U0VDVElPTl9DT1VOVDogbnVtYmVyLFxuICAgICAgICBza2lwU2h1ZmZsZTogYm9vbGVhbiA9IGZhbHNlXG4gICAgKXtcbiAgICAgICAgc3VwZXIoV0lEVEgsIEhFSUdIVCwgU0VDVElPTl9DT1VOVCk7XG5cbiAgICAgICAgdGhpcy5fY2VsbHNCeVNlY3Rpb24gPSBncm91cEJ5U2V0KHRoaXMuY2VsbHMsICh4KSA9PiB4LnNlY3Rpb24pO1xuXG4gICAgICAgIGlmICghc2tpcFNodWZmbGUpXG4gICAgICAgICAgICB0aGlzLnNodWZmbGVTZWN0aW9ucygpO1xuICAgIH1cblxuICAgIG92ZXJyaWRlIGNsb25lKCk6IEppZ3Nhd0dyaWQge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBuZXcgSmlnc2F3R3JpZCh0aGlzLldJRFRILCB0aGlzLkhFSUdIVCwgdGhpcy5TRUNUSU9OX0NPVU5ULCB0cnVlKTtcbiAgICAgICAgY29uc3Qgc2VjdGlvbk1hcHBpbmcgPSBuZXcgTWFwKHppcCh0aGlzLl9zZWN0aW9ucywgcmVzdWx0Ll9zZWN0aW9ucykpO1xuXHRcdGNvbnN0IG9yZGVyaW5nID0gKGE6IENlbGwsIGI6IENlbGwpID0+IHsgXG5cdFx0XHRyZXR1cm4gYS54ICE9PSBiLnggPyBiLnggLSBhLnggOiBiLnkgLSBhLnk7XG5cdFx0fTtcblxuXHRcdHJlc3VsdC5jZWxscy5zb3J0KG9yZGVyaW5nKTtcblx0XHRjb25zdCBjZWxscyA9IEFycmF5LmZyb20odGhpcy5jZWxscykuc29ydChvcmRlcmluZyk7XG5cdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCBjZWxscy5sZW5ndGg7IGkrKykge1xuXHRcdFx0Y29uc3QgY2VsbCA9IGNlbGxzW2ldITtcbiAgICAgICAgICAgIGNvbnN0IG90aGVyID0gcmVzdWx0LmNlbGxzW2ldITtcblxuICAgICAgICAgICAgb3RoZXIuc2VjdGlvbiA9IHNlY3Rpb25NYXBwaW5nLmdldChjZWxsLnNlY3Rpb24pITtcblx0XHRcdGlmIChjZWxsLnZhbHVlID09PSBudWxsKSB7XG5cdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0fVxuXG5cdFx0XHRvdGhlci5zZXRWYWx1ZShjZWxsLnZhbHVlKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIHByaXZhdGUgc2h1ZmZsZVNlY3Rpb25zKCkge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IElURVJBVElPTl9DT1VOVDsgaSsrKSB7XG4gICAgICAgICAgICBpZighdGhpcy5zd2FwKCkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFdhcyBub3QgYWJsZSB0byBzd2FwIHNlY3Rpb25zYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIHN3YXAoKTogYm9vbGVhbiB7XG4gICAgICAgIGNvbnN0IHNlY3Rpb25zID0gc2h1ZmZsZSh0aGlzLl9zZWN0aW9ucyk7XG4gICAgICAgIGZvciAoY29uc3Qgc2VjdGlvbiBvZiBzZWN0aW9ucykge1xuICAgICAgICAgICAgY29uc3QgY2VsbHNCeU5laWdoYm91cmluZ1NlY3Rpb24gPSBuZXcgRGVmYXVsdE1hcDxTZWN0aW9uLCBTZXQ8Q2VsbD4+KCk7XG4gICAgICAgICAgICBjb25zdCBjZWxsc09mTmVpZ2hib3VyaW5nU2VjdGlvbiA9IG5ldyBTZXQ8Q2VsbD4oKTtcblxuICAgICAgICAgICAgZm9yIChjb25zdCBjZWxsIG9mIHRoaXMuX2NlbGxzQnlTZWN0aW9uLmdldChzZWN0aW9uKSEpIHtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IG5laWdoYm91ciBvZiB0aGlzLm5laWdoYm91cmluZ0NlbGxzKGNlbGwsIHRoaXMuY2VsbHNCeVBvc2l0aW9uKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAobmVpZ2hib3VyLnNlY3Rpb24gPT09IHNlY3Rpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgY2VsbHNCeU5laWdoYm91cmluZ1NlY3Rpb25cbiAgICAgICAgICAgICAgICAgICAgICAgIC5nZXRPckRlZmF1bHQobmVpZ2hib3VyLnNlY3Rpb24sICgpID0+IG5ldyBTZXQ8Q2VsbD4oKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hZGQoY2VsbCk7XG4gICAgICAgICAgICAgICAgICAgIGNlbGxzT2ZOZWlnaGJvdXJpbmdTZWN0aW9uLmFkZChuZWlnaGJvdXIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZm9yIChjb25zdCBuZWlnaGJvdXIgb2Ygc2h1ZmZsZShjZWxsc09mTmVpZ2hib3VyaW5nU2VjdGlvbikpIHtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGNlbGxOZXh0VG9OZWlnaGJvdXIgb2Ygc2h1ZmZsZShjZWxsc0J5TmVpZ2hib3VyaW5nU2VjdGlvbi5nZXQobmVpZ2hib3VyLnNlY3Rpb24pISkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zd2FwU2VjdGlvbnMobmVpZ2hib3VyLCBjZWxsTmV4dFRvTmVpZ2hib3VyLCB0aGlzLl9jZWxsc0J5U2VjdGlvbik7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pc1NlY3Rpb25Db250aWd1b3VzKG5laWdoYm91ci5zZWN0aW9uLCB0aGlzLl9jZWxsc0J5U2VjdGlvbiwgdGhpcy5jZWxsc0J5UG9zaXRpb24pXG4gICAgICAgICAgICAgICAgICAgICAgICAmJiB0aGlzLmlzU2VjdGlvbkNvbnRpZ3VvdXMoY2VsbE5leHRUb05laWdoYm91ci5zZWN0aW9uLCB0aGlzLl9jZWxsc0J5U2VjdGlvbiwgdGhpcy5jZWxsc0J5UG9zaXRpb24pXG4gICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB0aGlzLnN3YXBTZWN0aW9ucyhuZWlnaGJvdXIsIGNlbGxOZXh0VG9OZWlnaGJvdXIsIHRoaXMuX2NlbGxzQnlTZWN0aW9uKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBuZWlnaGJvdXJpbmdDZWxscyhjZWxsOiBDZWxsLCBjZWxsc0J5UG9zaXRpb246IENlbGxzQnlQb3NpdGlvbik6IENlbGxbXSB7XG4gICAgICAgIGNvbnN0IG5laWdoYm91cnNQb3NpdGlvbjogQXJyYXk8UG9zaXRpb24+ID0gW1xuICAgICAgICAgICAgY2VsbC5wb3NpdGlvbigtMSwgMCksXG4gICAgICAgICAgICBjZWxsLnBvc2l0aW9uKCsxLCAwKSxcbiAgICAgICAgICAgIGNlbGwucG9zaXRpb24oMCwgLTEpLFxuICAgICAgICAgICAgY2VsbC5wb3NpdGlvbigwLCArMSksXG4gICAgICAgIF07XG5cbiAgICAgICAgcmV0dXJuIG5laWdoYm91cnNQb3NpdGlvblxuICAgICAgICAgICAgLnJlZHVjZShcbiAgICAgICAgICAgICAgICAoYWNjLCB4KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5laWdoYm91ciA9IGNlbGxzQnlQb3NpdGlvbi5nZXQoeCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChuZWlnaGJvdXIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYWNjLnB1c2gobmVpZ2hib3VyKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYWNjO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgbmV3IEFycmF5PENlbGw+KCkpO1xuICAgIH1cblxuICAgIHByaXZhdGUgaXNTZWN0aW9uQ29udGlndW91cyhcbiAgICAgICAgc2VjdGlvbjogU2VjdGlvbiwgXG4gICAgICAgIGNlbGxzQnlTZWN0aW9uOiBDZWxsc0J5U2VjdGlvbiwgXG4gICAgICAgIGNlbGxzQnlQb3NpdGlvbjogQ2VsbHNCeVBvc2l0aW9uXG4gICAgKTogYm9vbGVhbiB7XG4gICAgICAgIGNvbnN0IGNlbGxzID0gY2VsbHNCeVNlY3Rpb24uZ2V0KHNlY3Rpb24pITtcbiAgICAgICAgY29uc3QgdmlzaXRlZCA9IG5ldyBTZXQ8Q2VsbD4oKTtcbiAgICAgICAgY29uc3QgdG9WaXNpdCA9IEFycmF5LmZyb20oW2NlbGxzLnZhbHVlcygpLm5leHQoKS52YWx1ZV0pO1xuXG4gICAgICAgIHdoaWxlICh0b1Zpc2l0Lmxlbmd0aCkge1xuICAgICAgICAgICAgY29uc3QgY2VsbCA9IHRvVmlzaXQucG9wKCk7XG4gICAgICAgICAgICBpZiAodmlzaXRlZC5oYXMoY2VsbCkpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdmlzaXRlZC5hZGQoY2VsbCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRvVmlzaXQucHVzaChcbiAgICAgICAgICAgICAgICAuLi50aGlzLm5laWdoYm91cmluZ0NlbGxzKGNlbGwsIGNlbGxzQnlQb3NpdGlvbilcbiAgICAgICAgICAgICAgICAgICAgLmZpbHRlcih4ID0+IHguc2VjdGlvbiA9PT0gc2VjdGlvbikpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGVxdWl2YWxlbnQodmlzaXRlZCwgY2VsbHMpO1xuICAgIH1cblxuICAgIHByaXZhdGUgc3dhcFNlY3Rpb25zKGE6IENlbGwsIGI6IENlbGwsIGNlbGxzQnlTZWN0aW9uOiBDZWxsc0J5U2VjdGlvbik6IHZvaWQge1xuICAgICAgICBjZWxsc0J5U2VjdGlvbi5nZXQoYS5zZWN0aW9uKSEuZGVsZXRlKGEpO1xuICAgICAgICBjZWxsc0J5U2VjdGlvbi5nZXQoYi5zZWN0aW9uKSEuZGVsZXRlKGIpO1xuXG4gICAgICAgIGNvbnN0IHRtcCA9IGEuc2VjdGlvbjtcbiAgICAgICAgYS5zZWN0aW9uID0gYi5zZWN0aW9uO1xuICAgICAgICBiLnNlY3Rpb24gPSB0bXA7XG5cbiAgICAgICAgY2VsbHNCeVNlY3Rpb24uZ2V0KGEuc2VjdGlvbikhLmFkZChhKTtcbiAgICAgICAgY2VsbHNCeVNlY3Rpb24uZ2V0KGIuc2VjdGlvbikhLmFkZChiKTtcbiAgICB9XG59IiwiZXhwb3J0IGZ1bmN0aW9uIGludGVyc2VjdGlvbjxUPihcblx0eHM6IFNldDxUPixcblx0eXM6IFNldDxUPixcblx0Li4uYXJnczogU2V0PFQ+W11cbik6IFNldDxUPiB7XG5cdGNvbnN0IHJlc3VsdCA9IG5ldyBTZXQ8VD4oKTtcblx0Zm9yIChjb25zdCB4IG9mIHhzKSB7XG5cdFx0aWYgKHlzLmhhcyh4KSkge1xuXHRcdFx0cmVzdWx0LmFkZCh4KTtcblx0XHR9XG5cdH1cblxuXHRmb3IgKGNvbnN0IHpzIG9mIGFyZ3MpIHtcblx0XHRmb3IgKGNvbnN0IHggb2YgcmVzdWx0KSB7XG5cdFx0XHRpZiAoIXpzLmhhcyh4KSkge1xuXHRcdFx0XHRyZXN1bHQuZGVsZXRlKHgpO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdHJldHVybiByZXN1bHQ7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBlcXVpdmFsZW50PFQ+KFxuXHR4czogU2V0PFQ+LFxuXHR5czogU2V0PFQ+XG4pOiBib29sZWFuIHtcblx0cmV0dXJuIHhzLnNpemUgPT09IHlzLnNpemUgJiYgQXJyYXkuZnJvbSh4cykuZXZlcnkoeCA9PiB5cy5oYXMoeCkpO1xufSIsImV4cG9ydCBhYnN0cmFjdCBjbGFzcyBBY3Rpb24ge1xuICAgIGFic3RyYWN0IGRvKCk6IHZvaWQ7XG4gICAgYWJzdHJhY3QgdW5kbygpOiB2b2lkO1xufVxuIiwiaW1wb3J0IHtBY3Rpb259IGZyb20gJy4vYWN0aW9uJztcblxuZXhwb3J0IGNsYXNzIENvbXBvc2l0ZUFjdGlvbiBleHRlbmRzIEFjdGlvbiB7XG4gICAgcHJpdmF0ZSBfYWN0aW9uczogQWN0aW9uW107XG5cbiAgICBjb25zdHJ1Y3RvciguLi5hcmdzOiBBY3Rpb25bXSkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLl9hY3Rpb25zID0gYXJncztcbiAgICB9XG5cbiAgICBkbygpIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLl9hY3Rpb25zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB0aGlzLl9hY3Rpb25zW2ldIS5kbygpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgdW5kbygpOiB2b2lkIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IHRoaXMuX2FjdGlvbnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgICAgIHRoaXMuX2FjdGlvbnNbaV0hLnVuZG8oKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsImltcG9ydCB7IEFjdGlvbiB9IGZyb20gXCIuL2FjdGlvbnMvYWN0aW9uXCI7XG5cbmV4cG9ydCBjbGFzcyBPcGVyYXRpb25zIHtcbiAgICBwcml2YXRlIF9wcmV2aW91c2VzOiBBY3Rpb25bXSA9IFtdO1xuICAgIHByaXZhdGUgX25leHRzOiBBY3Rpb25bXSA9IFtdO1xuXG4gICAgcHJpdmF0ZSBfY2FsbGJhY2tzOiBBcnJheTwoKSA9PiB2b2lkPiA9IFtdO1xuXG4gICAgY2FuVW5kbygpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3ByZXZpb3VzZXMubGVuZ3RoICE9PSAwO1xuICAgIH1cblxuICAgIHVuZG8oKTogdm9pZCB7XG4gICAgICAgIGlmICh0aGlzLl9wcmV2aW91c2VzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBObyBhY3Rpb24gY2FuIGJlIHVuZG9uZWApO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgYWN0aW9uID0gdGhpcy5fcHJldmlvdXNlcy5wb3AoKSE7XG4gICAgICAgIGFjdGlvbi51bmRvKCk7XG4gICAgICAgIHRoaXMuX25leHRzLnB1c2goYWN0aW9uKTtcblxuICAgICAgICB0aGlzLm9uQWN0aW9uQ29tcGxldGVkKCk7XG4gICAgfVxuXG4gICAgY2FuUmVkbygpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX25leHRzLmxlbmd0aCAhPT0gMDtcbiAgICB9XG5cbiAgICByZWRvKCk6IHZvaWQge1xuICAgICAgICBpZiAodGhpcy5fbmV4dHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYE5vIGFjdGlvbiBjYW4gYmUgcmVkb25lYCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBhY3Rpb24gPSB0aGlzLl9uZXh0cy5wb3AoKSE7XG4gICAgICAgIGFjdGlvbi5kbygpO1xuICAgICAgICB0aGlzLl9wcmV2aW91c2VzLnB1c2goYWN0aW9uKTtcblxuICAgICAgICB0aGlzLm9uQWN0aW9uQ29tcGxldGVkKCk7XG4gICAgfVxuXG4gICAgZG8oYWN0aW9uOiBBY3Rpb24pOiB2b2lkIHtcbiAgICAgICAgdGhpcy5fcHJldmlvdXNlcy5wdXNoKGFjdGlvbik7XG4gICAgICAgIGFjdGlvbi5kbygpO1xuICAgICAgICB0aGlzLl9uZXh0cy5zcGxpY2UoMCwgdGhpcy5fbmV4dHMubGVuZ3RoKTtcblxuICAgICAgICB0aGlzLm9uQWN0aW9uQ29tcGxldGVkKCk7XG4gICAgfVxuXG4gICAgcmVnaXN0ZXJPbkFjdGlvbkNvbXBsZXRlZChjYWxsYmFjazogKCkgPT4gdm9pZCk6IHZvaWQge1xuICAgICAgICB0aGlzLl9jYWxsYmFja3MucHVzaChjYWxsYmFjayk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBvbkFjdGlvbkNvbXBsZXRlZCgpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5fY2FsbGJhY2tzLmZvckVhY2goZm4gPT4gZm4oKSk7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgQWN0aW9uIH0gZnJvbSBcIi4vYWN0aW9uXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgRG9Ob3RoaW5nQWN0aW9uIGV4dGVuZHMgQWN0aW9uIHtcclxuICAgIHN0YXRpYyBJbnN0YW5jZSA9IG5ldyBEb05vdGhpbmdBY3Rpb24oKTtcclxuXHJcbiAgICBkbygpOiB2b2lkIHsgfVxyXG4gICAgdW5kbygpOiB2b2lkIHsgfVxyXG59IiwiaW1wb3J0IHsgUmVuZGVyZWRDZWxsIH0gZnJvbSBcIi4uL3JlbmRlcmVkLWNlbGxcIjtcbmltcG9ydCB7IEFjdGlvbiB9IGZyb20gXCIuL2FjdGlvblwiO1xuXG5leHBvcnQgY2xhc3MgTWFya2luZ0FkZEFjdGlvbiBleHRlbmRzIEFjdGlvbiB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgX2NlbGw6IFJlbmRlcmVkQ2VsbCxcbiAgICAgICAgcHJpdmF0ZSBfbWFya2luZ3M6IG51bWJlcltdXG4gICAgKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgfVxuXG4gICAgZG8oKTogdm9pZCB7XG4gICAgICAgIHRoaXMuX21hcmtpbmdzLmZvckVhY2goeCA9PiB7XG4gICAgICAgICAgICB0aGlzLl9jZWxsLmFkZE1hcmtpbmcoeCk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHVuZG8oKTogdm9pZCB7XG4gICAgICAgIHRoaXMuX21hcmtpbmdzLmZvckVhY2goeCA9PiB7XG4gICAgICAgICAgICB0aGlzLl9jZWxsLnJlbW92ZU1ha2luZyh4KTtcbiAgICAgICAgfSk7XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgUmVtb3ZlTWFya2luZ0FjdGlvbiBleHRlbmRzIE1hcmtpbmdBZGRBY3Rpb24ge1xuICAgIGNvbnN0cnVjdG9yKGNlbGw6IFJlbmRlcmVkQ2VsbCwgbWFya2luZ3M6IG51bWJlcltdKSB7XG4gICAgICAgIHN1cGVyKGNlbGwsIG1hcmtpbmdzKTtcbiAgICB9XG5cbiAgICBvdmVycmlkZSBkbygpOiB2b2lkIHtcbiAgICAgICAgc3VwZXIudW5kbygpO1xuICAgIH1cblxuICAgIG92ZXJyaWRlIHVuZG8oKTogdm9pZCB7XG4gICAgICAgIHN1cGVyLmRvKCk7XG4gICAgfVxufSIsImltcG9ydCB7IFJlbmRlcmVkQ2VsbCB9IGZyb20gXCIuLi9yZW5kZXJlZC1jZWxsXCI7XG5pbXBvcnQgeyBBY3Rpb24gfSBmcm9tIFwiLi9hY3Rpb25cIjtcblxuZXhwb3J0IGNsYXNzIFBlbldyaXRlQWN0aW9uIGV4dGVuZHMgQWN0aW9uIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSBfY2VsbDogUmVuZGVyZWRDZWxsLFxuICAgICAgICBwcml2YXRlIF9udW1iZXI6IG51bWJlciB8IG51bGwsXG4gICAgICAgIHByaXZhdGUgX3ByZXZpb3VzTnVtYmVyOiBudW1iZXIgfCBudWxsKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgfVxuXG4gICAgZG8oKTogdm9pZCB7XG4gICAgICAgIHRoaXMuX2NlbGwud3JpdGVWYWx1ZSh0aGlzLl9udW1iZXIpO1xuICAgIH1cblxuICAgIHVuZG8oKTogdm9pZCB7XG4gICAgICAgIHRoaXMuX2NlbGwud3JpdGVWYWx1ZSh0aGlzLl9wcmV2aW91c051bWJlcik7XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgUGVuRXJhc2VBY3Rpb24gZXh0ZW5kcyBQZW5Xcml0ZUFjdGlvbiB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIGNlbGw6IFJlbmRlcmVkQ2VsbCxcbiAgICAgICAgcHJldmlvdXNOdW1iZXI6IG51bWJlciB8IG51bGxcbiAgICApIHtcbiAgICAgICAgc3VwZXIoY2VsbCwgbnVsbCwgcHJldmlvdXNOdW1iZXIpO1xuICAgIH1cbn0iLCJjb25zdCBTVkdfTlMgPSAnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnO1xyXG5cclxuY29uc3QgVklFV1BPUlRfV0lEVEggPSA5O1xyXG5jb25zdCBWSUVXUE9SVF9IRUlHSFQgPSA5O1xyXG5cclxuZXhwb3J0IGNsYXNzIFNWR0dlbmVyYXRvciB7XHJcbiAgICBjcmVhdGVTVkcoKTogU1ZHU1ZHRWxlbWVudCB7XHJcbiAgICAgICAgY29uc3Qgc3ZnID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKFNWR19OUywgJ3N2ZycpO1xyXG4gICAgICAgIHN2Zy5zZXRBdHRyaWJ1dGUoJ3ZpZXdCb3gnLCBgMCAwICR7VklFV1BPUlRfV0lEVEh9ICR7VklFV1BPUlRfV0lEVEh9YCk7XHJcbiAgICAgICAgc3ZnLnNldEF0dHJpYnV0ZSgnd2lkdGgnLCAnMTAwJScpO1xyXG4gICAgICAgIHN2Zy5zZXRBdHRyaWJ1dGUoJ2hlaWdodCcsICcxMDAlJyk7XHJcblxyXG4gICAgICAgIHJldHVybiBzdmc7XHJcbiAgICB9XHJcblxyXG4gICAgY3JlYXRlUGVuY2lsTWFya2luZyh2YWx1ZTogbnVtYmVyLCBtYXhYOiBudW1iZXIsIG1heFk6IG51bWJlcik6IFNWR1RleHRFbGVtZW50IHtcclxuICAgICAgICBjb25zdCB4ID0gKHZhbHVlIC0gMSkgJSBtYXhYO1xyXG4gICAgICAgIGNvbnN0IHkgPSBNYXRoLmZsb29yKCh2YWx1ZSAtIDEpIC8gbWF4WCk7XHJcblxyXG4gICAgICAgIGNvbnN0IG9mZnNldFggPSBWSUVXUE9SVF9XSURUSCAvIG1heFggKiAoeCArIDAuNSk7XHJcbiAgICAgICAgY29uc3Qgb2Zmc2V0WSA9IFZJRVdQT1JUX1dJRFRIIC8gbWF4WSAqICh5ICsgMC41KTtcclxuXHJcbiAgICAgICAgY29uc3QgdGV4dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhTVkdfTlMsICd0ZXh0Jyk7XHJcbiAgICAgICAgdGV4dC5jbGFzc0xpc3QuYWRkKCdwZW5jaWwtbWFya2luZycpO1xyXG4gICAgICAgIHRleHQuc2V0QXR0cmlidXRlKCdmb250LXNpemUnLCAnMycpO1xyXG4gICAgICAgIHRleHQuc2V0QXR0cmlidXRlKCdmb250LWZhbWlseScsICdtb25vc3BhY2UnKTtcclxuICAgICAgICB0ZXh0LnNldEF0dHJpYnV0ZSgnZm9udC1zdHlsZScsICdpdGFsaWMnKTtcclxuICAgICAgICB0ZXh0LnNldEF0dHJpYnV0ZSgnZm9udC13ZWlnaHQnLCAnYm9sZCcpO1xyXG4gICAgICAgIHRleHQuc2V0QXR0cmlidXRlKCdmaWxsJywgJ2N1cnJlbnRDb2xvcicpO1xyXG4gICAgICAgIHRleHQuc2V0QXR0cmlidXRlKCd0ZXh0LWFuY2hvcicsICdtaWRkbGUnKTtcclxuICAgICAgICB0ZXh0LnNldEF0dHJpYnV0ZSgnZG9taW5hbnQtYmFzZWxpbmUnLCAnY2VudHJhbCcpO1xyXG4gICAgICAgIHRleHQuc2V0QXR0cmlidXRlKCd4JywgYCR7b2Zmc2V0WH1gKTtcclxuICAgICAgICB0ZXh0LnNldEF0dHJpYnV0ZSgneScsIGAke29mZnNldFl9YCk7XHJcbiAgICAgICAgdGV4dC50ZXh0Q29udGVudCA9IGAke3ZhbHVlfWA7XHJcblxyXG4gICAgICAgIHJldHVybiB0ZXh0O1xyXG4gICAgfVxyXG5cclxuICAgIGNyZWF0ZVBlbk1hcmtpbmcodmFsdWU6IG51bWJlciwgaW1tdXRhYmxlOiBib29sZWFuID0gZmFsc2UpOiBTVkdUZXh0RWxlbWVudCB7XHJcbiAgICAgICAgY29uc3QgdGV4dCA9IHRoaXMuY3JlYXRlQ3VzdG9tVGV4dChgJHt2YWx1ZX1gKTtcclxuICAgICAgICB0ZXh0LmNsYXNzTGlzdC5hZGQoJ3Blbi1tYXJraW5nJyk7XHJcbiAgICAgICAgaWYgKGltbXV0YWJsZSkge1xyXG4gICAgICAgICAgICB0ZXh0LnNldEF0dHJpYnV0ZSgnZm9udC13ZWlnaHQnLCAnYm9sZCcpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRleHQuc2V0QXR0cmlidXRlKCdmb250LXN0eWxlJywgJ2l0YWxpYycpO1xyXG4gICAgICAgICAgICB0ZXh0LnNldEF0dHJpYnV0ZSgnZm9udC13ZWlnaHQnLCAnbm9ybWFsJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdGV4dDtcclxuICAgIH1cclxuXHJcbiAgICBjcmVhdGVDdXN0b21UZXh0KHZhbHVlOiBzdHJpbmcpOiBTVkdUZXh0RWxlbWVudCB7XHJcbiAgICAgICAgY29uc3QgdGV4dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhTVkdfTlMsICd0ZXh0Jyk7XHJcbiAgICAgICAgdGV4dC5zZXRBdHRyaWJ1dGUoJ2ZvbnQtc2l6ZScsICc1Jyk7XHJcbiAgICAgICAgdGV4dC5zZXRBdHRyaWJ1dGUoJ2ZvbnQtZmFtaWx5JywgJ21vbm9zcGFjZScpO1xyXG4gICAgICAgIHRleHQuc2V0QXR0cmlidXRlKCdmb250LXdlaWdodCcsICdib2xkJyk7XHJcbiAgICAgICAgdGV4dC5zZXRBdHRyaWJ1dGUoJ2ZpbGwnLCAnY3VycmVudENvbG9yJyk7XHJcbiAgICAgICAgdGV4dC5zZXRBdHRyaWJ1dGUoJ3RleHQtYW5jaG9yJywgJ21pZGRsZScpO1xyXG4gICAgICAgIHRleHQuc2V0QXR0cmlidXRlKCdkb21pbmFudC1iYXNlbGluZScsICdjZW50cmFsJyk7XHJcbiAgICAgICAgdGV4dC5zZXRBdHRyaWJ1dGUoJ3gnLCBgJHtWSUVXUE9SVF9XSURUSCAvIDJ9YCk7XHJcbiAgICAgICAgdGV4dC5zZXRBdHRyaWJ1dGUoJ3knLCBgJHtWSUVXUE9SVF9IRUlHSFQgLyAyfWApO1xyXG4gICAgICAgIHRleHQuaW5uZXJIVE1MID0gdmFsdWU7XHJcblxyXG4gICAgICAgIHJldHVybiB0ZXh0O1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7IENlbGwgfSBmcm9tIFwiLi4vZ3JpZC9jZWxsXCI7XG5pbXBvcnQgeyBDZWxsQ29sbGVjdGlvbiB9IGZyb20gXCIuLi9ncmlkL2NlbGwtY29sbGVjdGlvblwiO1xuaW1wb3J0IHsgR3JpZCB9IGZyb20gXCIuLi9ncmlkL2dyaWRcIjtcbmltcG9ydCB7IEFjdGlvbiB9IGZyb20gXCIuL2FjdGlvbnMvYWN0aW9uXCI7XG5pbXBvcnQgeyBDb21wb3NpdGVBY3Rpb24gfSBmcm9tIFwiLi9hY3Rpb25zL2NvbXBvc2l0ZS1hY3Rpb25cIjtcbmltcG9ydCB7IERvTm90aGluZ0FjdGlvbiB9IGZyb20gXCIuL2FjdGlvbnMvZG8tbm90aGluZy1hY3Rpb25cIjtcbmltcG9ydCB7IE1hcmtpbmdBZGRBY3Rpb24sIFJlbW92ZU1hcmtpbmdBY3Rpb24gYXMgTWFya2luZ1JlbW92ZUFjdGlvbiB9IGZyb20gXCIuL2FjdGlvbnMvbWFya2luZ3MtYWN0aW9uXCI7XG5pbXBvcnQgeyBQZW5FcmFzZUFjdGlvbiwgUGVuV3JpdGVBY3Rpb24gfSBmcm9tIFwiLi9hY3Rpb25zL3Blbi1hY3Rpb25cIjtcbmltcG9ydCB7IE9wZXJhdGlvbnMgfSBmcm9tIFwiLi9vcGVyYXRpb25zXCI7XG5pbXBvcnQgeyBSZW5kZXJlZENvbnRyb2xzIH0gZnJvbSBcIi4vcmVuZGVyZWQtY29udHJvbHNcIjtcbmltcG9ydCB7IFNWR0dlbmVyYXRvciB9IGZyb20gXCIuL3N2Zy1nZW5lcmF0b3JcIjtcblxuZXhwb3J0IGNsYXNzIFJlbmRlcmVkQ2VsbCB7XG5cdHJlYWRvbmx5IGVsOiBIVE1MVGFibGVDZWxsRWxlbWVudDtcblxuXHRyZWFkb25seSBjb2x1bW46IENlbGxDb2xsZWN0aW9uO1xuXHRyZWFkb25seSByb3c6IENlbGxDb2xsZWN0aW9uO1xuXHRyZWFkb25seSBzZWN0aW9uOiBDZWxsQ29sbGVjdGlvbjtcblxuXHR2YWx1ZTogbnVtYmVyIHwgbnVsbDtcblxuXHRwcml2YXRlIF9pc0NvbnN0YW50OiBib29sZWFuO1xuXHRwcml2YXRlIF9tYXJraW5nczogTWFwPG51bWJlciwgU1ZHVGV4dEVsZW1lbnQ+O1xuXHRwcml2YXRlIF9vblZhbHVlQ2hhbmdlZDogQXJyYXk8KGNlbGw6IFJlbmRlcmVkQ2VsbCkgPT4gdm9pZD47XG5cdHByaXZhdGUgX3N2Z0dlbmVyYXRvciA9IG5ldyBTVkdHZW5lcmF0b3IoKTtcblx0cHJpdmF0ZSBfc3ZnOiBTVkdFbGVtZW50O1xuXG5cdGNvbnN0cnVjdG9yKFxuXHRcdGNlbGw6IENlbGwsXG5cdFx0cHJpdmF0ZSBfZ3JpZDogR3JpZCxcblx0XHRwcml2YXRlIF9vcGVyYXRpb25zOiBPcGVyYXRpb25zLFxuXHRcdHByaXZhdGUgX2NvbnRyb2w6IFJlbmRlcmVkQ29udHJvbHNcblx0KSB7XG5cdFx0dGhpcy5jb2x1bW4gPSBjZWxsLmNvbHVtbjtcblx0XHR0aGlzLnJvdyA9IGNlbGwucm93O1xuXHRcdHRoaXMuc2VjdGlvbiA9IGNlbGwuc2VjdGlvbjtcblxuXHRcdHRoaXMudmFsdWUgPSBjZWxsLnZhbHVlO1xuXHRcdHRoaXMuX21hcmtpbmdzID0gbmV3IE1hcDxudW1iZXIsIFNWR1RleHRFbGVtZW50PigpO1xuXHRcdHRoaXMuX29uVmFsdWVDaGFuZ2VkID0gW107XG5cblx0XHR0aGlzLmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGQnKTtcblx0XHR0aGlzLl9zdmcgPSB0aGlzLl9zdmdHZW5lcmF0b3IuY3JlYXRlU1ZHKCk7XG5cdFx0dGhpcy5lbC5hcHBlbmRDaGlsZCh0aGlzLl9zdmcpO1xuXG5cdFx0dGhpcy5lbC5zZXRBdHRyaWJ1dGUoJ3NlY3Rpb24nLCBgJHtjZWxsLnNlY3Rpb24ub3JkfWApO1xuXHRcdGlmIChfZ3JpZC5jZWxsc0J5UG9zaXRpb24uZ2V0KGNlbGwucG9zaXRpb24oKzEsIDApKT8uc2VjdGlvbiAhPT0gY2VsbC5zZWN0aW9uKSB7XG5cdFx0XHR0aGlzLmVsLmNsYXNzTGlzdC5hZGQoJ3NlY3Rpb24tZWRnZS10b3AnKTtcblx0XHR9XG5cdFx0aWYgKF9ncmlkLmNlbGxzQnlQb3NpdGlvbi5nZXQoY2VsbC5wb3NpdGlvbigtMSwgMCkpPy5zZWN0aW9uICE9PSBjZWxsLnNlY3Rpb24pIHtcblx0XHRcdHRoaXMuZWwuY2xhc3NMaXN0LmFkZCgnc2VjdGlvbi1lZGdlLWJvdHRvbScpO1xuXHRcdH1cblx0XHRpZiAoX2dyaWQuY2VsbHNCeVBvc2l0aW9uLmdldChjZWxsLnBvc2l0aW9uKDAsICsxKSk/LnNlY3Rpb24gIT09IGNlbGwuc2VjdGlvbikge1xuXHRcdFx0dGhpcy5lbC5jbGFzc0xpc3QuYWRkKCdzZWN0aW9uLWVkZ2UtbGVmdCcpO1xuXHRcdH1cblx0XHRpZiAoX2dyaWQuY2VsbHNCeVBvc2l0aW9uLmdldChjZWxsLnBvc2l0aW9uKDAsIC0xKSk/LnNlY3Rpb24gIT09IGNlbGwuc2VjdGlvbikge1xuXHRcdFx0dGhpcy5lbC5jbGFzc0xpc3QuYWRkKCdzZWN0aW9uLWVkZ2UtcmlnaHQnKTtcblx0XHR9XG5cblx0XHRpZiAodGhpcy5faXNDb25zdGFudCA9IGNlbGwudmFsdWUgIT09IG51bGwpIHtcblx0XHRcdHRoaXMuZWwuY2xhc3NMaXN0LmFkZCgnY29uc3RhbnQnKTtcblx0XHRcdGNvbnN0IG1hcmtpbmcgPSB0aGlzLl9zdmdHZW5lcmF0b3IuY3JlYXRlUGVuTWFya2luZyhjZWxsLnZhbHVlLCB0cnVlKTtcblx0XHRcdHRoaXMuX3N2Zy5hcHBlbmRDaGlsZChtYXJraW5nKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHR0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5vbkNsaWNrLmJpbmQodGhpcykpO1xuXHR9XG5cblx0cmVnaXN0ZXJPblZhbHVlQ2hhbmdlZChmbjogKGNlbGw6IFJlbmRlcmVkQ2VsbCkgPT4gdm9pZCkge1xuXHRcdHRoaXMuX29uVmFsdWVDaGFuZ2VkLnB1c2goZm4pO1xuXHR9XG5cblx0cmVtb3ZlTWFraW5nKG51bWJlcjogbnVtYmVyKTogdm9pZCB7XG5cdFx0aWYgKCF0aGlzLl9tYXJraW5ncy5oYXMobnVtYmVyKSkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdGNvbnN0IG1hcmtpbmcgPSB0aGlzLl9tYXJraW5ncy5nZXQobnVtYmVyKSE7XG5cblx0XHR0aGlzLl9zdmcucmVtb3ZlQ2hpbGQobWFya2luZyk7XG5cdFx0dGhpcy5fbWFya2luZ3MuZGVsZXRlKG51bWJlcik7XG5cdH1cblxuXHRhZGRNYXJraW5nKG51bWJlcjogbnVtYmVyKTogdm9pZCB7XG5cdFx0aWYgKHRoaXMuX21hcmtpbmdzLmhhcyhudW1iZXIpKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Y29uc3QgbWFya2luZyA9IHRoaXMuX3N2Z0dlbmVyYXRvci5jcmVhdGVQZW5jaWxNYXJraW5nKG51bWJlciwgMywgMyk7XG5cblx0XHR0aGlzLl9zdmcuYXBwZW5kQ2hpbGQobWFya2luZyk7XG5cdFx0dGhpcy5fbWFya2luZ3Muc2V0KG51bWJlciwgbWFya2luZyk7XG5cdH1cblxuXHR3cml0ZVZhbHVlKG51bWJlcjogbnVtYmVyIHwgbnVsbCk6IHZvaWQge1xuXHRcdHRoaXMudmFsdWUgPSBudW1iZXI7XG5cdFx0XG5cdFx0aWYgKG51bWJlciA9PT0gbnVsbCkge1xuXHRcdFx0dGhpcy5fc3ZnLmNoaWxkTm9kZXMuZm9yRWFjaCh4ID0+IHRoaXMuX3N2Zy5yZW1vdmVDaGlsZCh4KSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHRoaXMuX3N2Zy5hcHBlbmRDaGlsZCh0aGlzLl9zdmdHZW5lcmF0b3IuY3JlYXRlUGVuTWFya2luZyhudW1iZXIpKTtcblx0XHR9XG5cblx0XHR0aGlzLm9uVmFsdWVDaGFuZ2VkKCk7XG5cdH1cblxuXHRmaWxsTWFya2luZ3NBY3Rpb24oKTogQWN0aW9uIHtcblx0XHRpZiAodGhpcy5faXNDb25zdGFudCkge1xuXHRcdFx0cmV0dXJuIERvTm90aGluZ0FjdGlvbi5JbnN0YW5jZTtcblx0XHR9XG5cblx0XHRyZXR1cm4gbmV3IE1hcmtpbmdBZGRBY3Rpb24oXG5cdFx0XHR0aGlzLFxuXHRcdFx0dGhpcy5fZ3JpZC52YWxpZFZhbHVlcygpLmZpbHRlcih4ID0+ICF0aGlzLl9tYXJraW5ncy5oYXMoeCkpXG5cdFx0KTtcblx0fVxuXG5cdHByaXZhdGUgb25WYWx1ZUNoYW5nZWQoKTogdm9pZCB7XG5cdFx0dGhpcy5fb25WYWx1ZUNoYW5nZWQuZm9yRWFjaChmbiA9PiBmbih0aGlzKSk7XG5cdH1cblxuXHRwcml2YXRlIG9uQ2xpY2soKTogdm9pZCB7XG5cdFx0Y29uc3QgbnVtYmVyID0gdGhpcy5fY29udHJvbC5zZWxlY3RlZE51bWJlcjtcblx0XHRjb25zdCBpc01hcmtpbmcgPSB0aGlzLl9jb250cm9sLmlzUGVuY2lsTWFya2luZygpO1xuXG5cdFx0aWYgKCFpc01hcmtpbmcpIHtcblx0XHRcdGlmICh0aGlzLnZhbHVlID09PSBudW1iZXIpIHtcblx0XHRcdFx0dGhpcy5fb3BlcmF0aW9ucy5kbyhuZXcgUGVuRXJhc2VBY3Rpb24odGhpcywgdGhpcy52YWx1ZSkpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dGhpcy5fb3BlcmF0aW9ucy5kbyhcblx0XHRcdFx0XHRuZXcgQ29tcG9zaXRlQWN0aW9uKFxuXHRcdFx0XHRcdFx0bmV3IE1hcmtpbmdSZW1vdmVBY3Rpb24odGhpcywgQXJyYXkuZnJvbSh0aGlzLl9tYXJraW5ncy5rZXlzKCkpKSxcblx0XHRcdFx0XHRcdG5ldyBQZW5Xcml0ZUFjdGlvbih0aGlzLCBudW1iZXIsIHRoaXMudmFsdWUpXG5cdFx0XHRcdFx0KSk7XG5cdFx0XHRcdHRoaXMuX21hcmtpbmdzLmNsZWFyKCk7XG5cdFx0XHR9XG5cdFx0fSBlbHNlIGlmICh0aGlzLnZhbHVlICE9PSBudWxsKSB7XG5cdFx0XHR0aGlzLl9vcGVyYXRpb25zLmRvKFxuXHRcdFx0XHRuZXcgQ29tcG9zaXRlQWN0aW9uKFxuXHRcdFx0XHRcdG5ldyBQZW5FcmFzZUFjdGlvbih0aGlzLCB0aGlzLnZhbHVlKSxcblx0XHRcdFx0XHRuZXcgTWFya2luZ0FkZEFjdGlvbih0aGlzLCBbbnVtYmVyXSlcblx0XHRcdFx0KSk7XG5cdFx0fSBlbHNlIGlmICh0aGlzLl9tYXJraW5ncy5oYXMobnVtYmVyKSkge1xuXHRcdFx0dGhpcy5fb3BlcmF0aW9ucy5kbyhcblx0XHRcdFx0bmV3IE1hcmtpbmdSZW1vdmVBY3Rpb24odGhpcywgW251bWJlcl0pXG5cdFx0XHQpXG5cdFx0fSBlbHNlIHtcblx0XHRcdHRoaXMuX29wZXJhdGlvbnMuZG8oXG5cdFx0XHRcdG5ldyBNYXJraW5nQWRkQWN0aW9uKHRoaXMsIFtudW1iZXJdKVxuXHRcdFx0KTtcblx0XHR9XG5cdH1cbn0iLCJpbXBvcnQgeyBHcmlkIH0gZnJvbSBcIi4uL2dyaWQvZ3JpZFwiO1xuaW1wb3J0IHsgT3BlcmF0aW9ucyB9IGZyb20gXCIuL29wZXJhdGlvbnNcIjtcbmltcG9ydCB7IFNWR0dlbmVyYXRvciB9IGZyb20gXCIuL3N2Zy1nZW5lcmF0b3JcIjtcblxuZXhwb3J0IGNsYXNzIFJlbmRlcmVkQ29udHJvbHMge1xuICAgIHJlYWRvbmx5IGVsOiBIVE1MRWxlbWVudDtcblxuICAgIGdldCBzZWxlY3RlZE51bWJlcigpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5fc2VsZWN0ZWROdW1iZXI7XG4gICAgfVxuXG4gICAgc2V0IHNlbGVjdGVkTnVtYmVyKHZhbHVlOiBudW1iZXIpIHtcbiAgICAgICAgdGhpcy5fbnVtYmVyc1t0aGlzLl9zZWxlY3RlZE51bWJlciAtIDFdIS5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcbiAgICAgICAgdGhpcy5fc2VsZWN0ZWROdW1iZXIgPSB2YWx1ZTtcbiAgICAgICAgdGhpcy5fbnVtYmVyc1t0aGlzLl9zZWxlY3RlZE51bWJlciAtIDFdIS5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIF9zZWxlY3RlZE51bWJlciA9IDE7XG4gICAgcHJpdmF0ZSBfaXNQZW5jaWxNYXJraW5nID0gdHJ1ZTtcblxuICAgIHByaXZhdGUgX251bWJlcnMgPSBuZXcgQXJyYXk8SFRNTEJ1dHRvbkVsZW1lbnQ+KCk7XG4gICAgcHJpdmF0ZSBfc3ZnR2VuZXJhdG9yID0gbmV3IFNWR0dlbmVyYXRvcigpO1xuXG4gICAgY29uc3RydWN0b3IoZ3JpZDogR3JpZCwgb3BlcmF0aW9uczogT3BlcmF0aW9ucywgb25GaWxsTWFya2luZ3M6ICgpID0+IHZvaWQpIHtcbiAgICAgICAgY29uc3QgY29udHJvbHMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgY29udHJvbHMuY2xhc3NMaXN0LmFkZCgnY29udHJvbHMnKTtcbiAgICAgICAgY29udHJvbHMuY2xhc3NMaXN0LmFkZCgncGVuY2lsLW1vZGUnKTtcblxuICAgICAgICBjb25zdCBwZW5jaWwgPSB0aGlzLmNyZWF0ZVBlbmNpbCgpO1xuXG4gICAgICAgIGNvbnRyb2xzLmFwcGVuZENoaWxkKHBlbmNpbCk7XG5cbiAgICAgICAgZm9yIChsZXQgdmFsdWUgPSAxOyB2YWx1ZSA8PSBncmlkLk1BWF9WQUxVRTsgdmFsdWUrKykge1xuICAgICAgICAgICAgY29uc3QgbnVtYmVyID0gdGhpcy5jcmVhdGVOdW1iZXIodmFsdWUpO1xuICAgICAgICAgICAgbnVtYmVyLnRpdGxlID0gYFNlbGVjdHMgbnVtYmVyICR7dmFsdWV9IChzaG9ydGN1dDogJHt2YWx1ZX0pYDtcbiAgICAgICAgICAgIHRoaXMuX251bWJlcnMucHVzaChudW1iZXIpO1xuICAgICAgICAgICAgY29udHJvbHMuYXBwZW5kQ2hpbGQobnVtYmVyKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHVuZG8gPSB0aGlzLmNyZWF0ZVVuZG9CdXR0b24ob3BlcmF0aW9ucyk7XG4gICAgICAgIGNvbnN0IHJlZG8gPSB0aGlzLmNyZWF0ZVJlZG9CdXR0b24ob3BlcmF0aW9ucyk7XG4gICAgICAgIG9wZXJhdGlvbnMucmVnaXN0ZXJPbkFjdGlvbkNvbXBsZXRlZCgoKSA9PiB7XG4gICAgICAgICAgICB1bmRvLmRpc2FibGVkID0gIW9wZXJhdGlvbnMuY2FuVW5kbygpO1xuICAgICAgICAgICAgcmVkby5kaXNhYmxlZCA9ICFvcGVyYXRpb25zLmNhblJlZG8oKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29udHJvbHMuYXBwZW5kQ2hpbGQodW5kbyk7XG4gICAgICAgIGNvbnRyb2xzLmFwcGVuZENoaWxkKHJlZG8pO1xuXG4gICAgICAgIGNvbnN0IGZpbGxNYXJraW5ncyA9IHRoaXMuY3JlYXRlRmlsbE1hcmtpbmdzKCk7XG4gICAgICAgIGZpbGxNYXJraW5ncy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG9uRmlsbE1hcmtpbmdzKTtcbiAgICAgICAgY29udHJvbHMuYXBwZW5kKGZpbGxNYXJraW5ncyk7XG5cbiAgICAgICAgdGhpcy5lbCA9IGNvbnRyb2xzO1xuICAgIH1cblxuICAgIGlzUGVuY2lsTWFya2luZygpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2lzUGVuY2lsTWFya2luZztcbiAgICB9XG5cbiAgICB0b2dnbGVQZW5jaWxNYXJraW5nKCkge1xuICAgICAgICB0aGlzLl9pc1BlbmNpbE1hcmtpbmcgPSAhdGhpcy5faXNQZW5jaWxNYXJraW5nO1xuICAgICAgICB0aGlzLmVsLmNsYXNzTGlzdC50b2dnbGUoJ3BlbmNpbC1tb2RlJywgdGhpcy5faXNQZW5jaWxNYXJraW5nKTtcbiAgICAgICAgdGhpcy5lbC5jbGFzc0xpc3QudG9nZ2xlKCdwZW4tbW9kZScsICF0aGlzLl9pc1BlbmNpbE1hcmtpbmcpO1xuICAgIH1cblxuICAgIHByaXZhdGUgY3JlYXRlTnVtYmVyKHZhbHVlOiBudW1iZXIpOiBIVE1MQnV0dG9uRWxlbWVudCB7XG4gICAgICAgIGNvbnN0IGJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgICAgICAvLyBUT0RPOiBTdXBwb3J0IGxldHRlcnMgZm9yIG51bWJlcnMgZ3JlYXRlciB0aGFuIDlcbiAgICAgICAgYnV0dG9uLnRpdGxlID0gYFNlbGVjdCAke3ZhbHVlfSAoc2hvcnRjdXQ6ICR7dmFsdWV9KWA7XG4gICAgICAgIGJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdwZW5jaWwtZGVwZW5kZW50Jyk7XG5cbiAgICAgICAgaWYgKHZhbHVlID09PSB0aGlzLl9zZWxlY3RlZE51bWJlcikge1xuICAgICAgICAgICAgYnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qgc3ZnID0gdGhpcy5fc3ZnR2VuZXJhdG9yLmNyZWF0ZVNWRygpO1xuICAgICAgICBzdmcuYXBwZW5kQ2hpbGQodGhpcy5fc3ZnR2VuZXJhdG9yLmNyZWF0ZVBlbk1hcmtpbmcodmFsdWUpKTtcbiAgICAgICAgc3ZnLmFwcGVuZENoaWxkKHRoaXMuX3N2Z0dlbmVyYXRvci5jcmVhdGVQZW5jaWxNYXJraW5nKHZhbHVlLCAzLCAzKSk7XG5cbiAgICAgICAgYnV0dG9uLmFwcGVuZENoaWxkKHN2Zyk7XG4gICAgICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgICAgICAgJ2NsaWNrJywgXG4gICAgICAgICAgICAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZE51bWJlciA9IHZhbHVlO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIGJ1dHRvbjtcbiAgICB9XG5cbiAgICBwcml2YXRlIGNyZWF0ZVBlbmNpbCgpIHtcbiAgICAgICAgY29uc3QgcGVuY2lsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgICAgIHBlbmNpbC5jbGFzc0xpc3QuYWRkKCdwZW5jaWwnKTtcbiAgICAgICAgcGVuY2lsLnRpdGxlID0gXCJUb2dnbGUgYmV0d2VlbiBwZW4gYW5kIHBlbmNpbCAoc2hvcnRjdXQ6IHNwYWNlKVwiO1xuXG4gICAgICAgIHBlbmNpbC5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgICAgICAgJ2NsaWNrJyxcbiAgICAgICAgICAgICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnRvZ2dsZVBlbmNpbE1hcmtpbmcoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcblxuICAgICAgICBjb25zdCBzdmcgPSB0aGlzLl9zdmdHZW5lcmF0b3IuY3JlYXRlU1ZHKCk7XG4gICAgICAgIHN2Zy5hcHBlbmRDaGlsZCh0aGlzLl9zdmdHZW5lcmF0b3IuY3JlYXRlQ3VzdG9tVGV4dCgnJiN4MjcwRScpKTtcbiAgICAgICAgcGVuY2lsLmFwcGVuZENoaWxkKHN2Zyk7XG5cbiAgICAgICAgcmV0dXJuIHBlbmNpbDtcbiAgICB9XG5cbiAgICBwcml2YXRlIGNyZWF0ZVVuZG9CdXR0b24ob3BlcmF0aW9uczogT3BlcmF0aW9ucykge1xuICAgICAgICBjb25zdCB1bmRvID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgICAgIHVuZG8udGl0bGUgPSBgVW5kbyAoc2hvcnRjdXQ6IENUUkwrWilgO1xuICAgICAgICB1bmRvLmNsYXNzTGlzdC5hZGQoJ3VuZG8nKTtcblxuICAgICAgICB1bmRvLmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgICAgdW5kby5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgICAgICAgJ2NsaWNrJyxcbiAgICAgICAgICAgICgpID0+IHsgb3BlcmF0aW9ucy51bmRvKCk7IH1cbiAgICAgICAgKTtcblxuICAgICAgICBjb25zdCBzdmcgPSB0aGlzLl9zdmdHZW5lcmF0b3IuY3JlYXRlU1ZHKCk7XG4gICAgICAgIHN2Zy5hcHBlbmRDaGlsZCh0aGlzLl9zdmdHZW5lcmF0b3IuY3JlYXRlQ3VzdG9tVGV4dCgnJiN4MjkzQScpKTtcbiAgICAgICAgdW5kby5hcHBlbmRDaGlsZChzdmcpO1xuXG4gICAgICAgIHJldHVybiB1bmRvO1xuICAgIH1cblxuICAgIHByaXZhdGUgY3JlYXRlUmVkb0J1dHRvbihvcGVyYXRpb25zOiBPcGVyYXRpb25zKSB7XG4gICAgICAgIGNvbnN0IHJlZG8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICAgICAgcmVkby50aXRsZSA9IGBSZWRvIChzaG9ydGN1dDogQ1RSTCtZKWA7XG4gICAgICAgIHJlZG8uY2xhc3NMaXN0LmFkZCgncmVkbycpO1xuXG4gICAgICAgIHJlZG8uZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgICByZWRvLmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICAgICAgICAnY2xpY2snLFxuICAgICAgICAgICAgKCkgPT4geyBvcGVyYXRpb25zLnJlZG8oKTsgfVxuICAgICAgICApO1xuXG4gICAgICAgIGNvbnN0IHN2ZyA9IHRoaXMuX3N2Z0dlbmVyYXRvci5jcmVhdGVTVkcoKTtcbiAgICAgICAgY29uc3QgdGV4dCA9IHRoaXMuX3N2Z0dlbmVyYXRvci5jcmVhdGVDdXN0b21UZXh0KCcmI3gyOTNBJyk7XG4gICAgICAgIHRleHQuc2V0QXR0cmlidXRlKCd0cmFuc2Zvcm0tb3JpZ2luJywgJ2NlbnRlcicpO1xuICAgICAgICB0ZXh0LnNldEF0dHJpYnV0ZSgndHJhbnNmb3JtJywgJ3NjYWxlKC0xLCAxKScpO1xuICAgICAgICBzdmcuYXBwZW5kQ2hpbGQodGV4dCk7XG4gICAgICAgIHJlZG8uYXBwZW5kQ2hpbGQoc3ZnKTtcblxuICAgICAgICByZXR1cm4gcmVkbztcbiAgICB9XG5cblxuICAgIHByaXZhdGUgY3JlYXRlRmlsbE1hcmtpbmdzKCk6IEhUTUxCdXR0b25FbGVtZW50IHtcbiAgICAgICAgY29uc3QgYnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgICAgIGJ1dHRvbi50aXRsZSA9IGBGaWxsIGFsbCBtYXJraW5nc2A7XG4gICAgICAgIGJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdwZW5jaWwtaW5kZXBlbmRlbnQnKTtcblxuICAgICAgICBjb25zdCBzdmcgPSB0aGlzLl9zdmdHZW5lcmF0b3IuY3JlYXRlU1ZHKCk7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgOTsgaSsrKSB7XG4gICAgICAgICAgICBzdmcuYXBwZW5kQ2hpbGQodGhpcy5fc3ZnR2VuZXJhdG9yLmNyZWF0ZVBlbmNpbE1hcmtpbmcoaSArIDEsIDMsIDMpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGJ1dHRvbi5hcHBlbmRDaGlsZChzdmcpO1xuXG4gICAgICAgIHJldHVybiBidXR0b247XG4gICAgfVxufSIsImltcG9ydCB7IENlbGxDb2xsZWN0aW9uIH0gZnJvbSBcIi4uL2dyaWQvY2VsbC1jb2xsZWN0aW9uXCI7XG5pbXBvcnQgeyBHcmlkIH0gZnJvbSBcIi4uL2dyaWQvZ3JpZFwiO1xuaW1wb3J0IHsgZ3JvdXBCeSB9IGZyb20gXCIuLi9oZWxwZXJzL2FycmF5LmhlbHBlclwiO1xuaW1wb3J0IHsgQ29tcG9zaXRlQWN0aW9uIH0gZnJvbSBcIi4vYWN0aW9ucy9jb21wb3NpdGUtYWN0aW9uXCI7XG5pbXBvcnQgeyBPcGVyYXRpb25zIH0gZnJvbSBcIi4vb3BlcmF0aW9uc1wiO1xuaW1wb3J0IHsgUmVuZGVyZWRDZWxsIH0gZnJvbSBcIi4vcmVuZGVyZWQtY2VsbFwiO1xuaW1wb3J0IHsgUmVuZGVyZWRDb250cm9scyB9IGZyb20gXCIuL3JlbmRlcmVkLWNvbnRyb2xzXCI7XG5cbmV4cG9ydCBjbGFzcyBSZW5kZXJlZFN1ZG9rdUdyaWQge1xuXHRyZWFkb25seSBlbDogSFRNTEVsZW1lbnQ7XG5cblx0cHJpdmF0ZSBfb3BlcmF0aW9uczogT3BlcmF0aW9ucztcblx0cHJpdmF0ZSBfcmVuZGVyZWRDZWxsczogQXJyYXk8UmVuZGVyZWRDZWxsPjtcblxuXHRwcml2YXRlIF9jZWxsc0J5Q29sdW1uOiBNYXA8Q2VsbENvbGxlY3Rpb24sIFJlbmRlcmVkQ2VsbFtdPjtcblx0cHJpdmF0ZSBfY2VsbHNCeVJvdzogTWFwPENlbGxDb2xsZWN0aW9uLCBSZW5kZXJlZENlbGxbXT47XG5cdHByaXZhdGUgX2NlbGxzQnlTZWN0aW9uOiBNYXA8Q2VsbENvbGxlY3Rpb24sIFJlbmRlcmVkQ2VsbFtdPjtcblxuXHRjb25zdHJ1Y3RvcihncmlkOiBHcmlkKSB7XG5cdFx0dGhpcy5fb3BlcmF0aW9ucyA9IG5ldyBPcGVyYXRpb25zKCk7XG5cdFx0dGhpcy5fcmVuZGVyZWRDZWxscyA9IG5ldyBBcnJheTxSZW5kZXJlZENlbGw+KCk7XG5cblx0XHRjb25zdCBjb250cm9scyA9IG5ldyBSZW5kZXJlZENvbnRyb2xzKGdyaWQsIHRoaXMuX29wZXJhdGlvbnMsICgpID0+IHtcblx0XHRcdHRoaXMuX29wZXJhdGlvbnMuZG8oXG5cdFx0XHRcdG5ldyBDb21wb3NpdGVBY3Rpb24oXG5cdFx0XHRcdFx0Li4udGhpcy5fcmVuZGVyZWRDZWxscy5tYXAoeCA9PiB4LmZpbGxNYXJraW5nc0FjdGlvbigpKVxuXHRcdFx0XHQpXG5cdFx0XHQpO1xuXHRcdH0pO1xuXHRcdGNvbnN0IHRhYmxlID0gdGhpcy5jcmVhdGVUYWJsZShncmlkLCBjb250cm9scyk7XG5cblx0XHR0aGlzLl9jZWxsc0J5Q29sdW1uID0gZ3JvdXBCeSh0aGlzLl9yZW5kZXJlZENlbGxzLCAoeCkgPT4geC5jb2x1bW4pO1xuXHRcdHRoaXMuX2NlbGxzQnlSb3cgPSBncm91cEJ5KHRoaXMuX3JlbmRlcmVkQ2VsbHMsICh4KSA9PiB4LnJvdyk7XG5cdFx0dGhpcy5fY2VsbHNCeVNlY3Rpb24gPSBncm91cEJ5KHRoaXMuX3JlbmRlcmVkQ2VsbHMsICh4KSA9PiB4LnNlY3Rpb24pO1xuXG5cdFx0Y29uc3Qgd3JhcHBlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXHRcdHdyYXBwZXIudGFiSW5kZXggPSAwO1xuXHRcdHdyYXBwZXIuc3R5bGUuc2V0UHJvcGVydHkoJy0tbWF4LXgnLCBgM2ApO1xuXHRcdHdyYXBwZXIuc3R5bGUuc2V0UHJvcGVydHkoJy0tbWF4LXknLCBgJHtNYXRoLmNlaWwoZ3JpZC5NQVhfVkFMVUUgLyAzKX1gKTtcblxuXHRcdHdyYXBwZXIuY2xhc3NMaXN0LmFkZCgnc3Vkb2t1Jyk7XG5cdFx0d3JhcHBlci5hcHBlbmRDaGlsZCh0YWJsZSk7XG5cdFx0d3JhcHBlci5hcHBlbmRDaGlsZChjb250cm9scy5lbCk7XG5cblx0XHR3cmFwcGVyLmFkZEV2ZW50TGlzdGVuZXIoXG5cdFx0XHQna2V5ZG93bicsXG5cdFx0XHQoZSkgPT4ge1xuXHRcdFx0XHRpZiAoZS5yZXBlYXQpIHtcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAoMSA8PSArZS5rZXkgJiYgK2Uua2V5IDw9IGdyaWQuTUFYX1ZBTFVFKSB7XG5cdFx0XHRcdFx0Y29udHJvbHMuc2VsZWN0ZWROdW1iZXIgPSArZS5rZXk7XG5cdFx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0XHR9IGVsc2UgaWYgKGUua2V5ID09PSBcIiBcIikge1xuXHRcdFx0XHRcdGNvbnRyb2xzLnRvZ2dsZVBlbmNpbE1hcmtpbmcoKTtcblx0XHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdH0gZWxzZSBpZiAoZS5rZXkgPT09IFwielwiICYmIGUuY3RybEtleSkge1xuXHRcdFx0XHRcdC8vIFRPRE86IEFkZCBhIHdhcm5pbmcgdG8gdGVsbCB0aGUgdXNlciBjYW4ndCB1bmRvXG5cdFx0XHRcdFx0aWYgKHRoaXMuX29wZXJhdGlvbnMuY2FuVW5kbygpKSAge1xuXHRcdFx0XHRcdFx0dGhpcy5fb3BlcmF0aW9ucy51bmRvKCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGVsc2UgaWYgKGUua2V5ID09PSBcInlcIiAmJiBlLmN0cmxLZXkpIHtcblx0XHRcdFx0XHQvLyBUT0RPOiBBZGQgYSB3YXJuaW5nIHRvIHRlbGwgdGhlIHVzZXIgY2FuJ3QgcmVkb1xuXHRcdFx0XHRcdGlmICh0aGlzLl9vcGVyYXRpb25zLmNhblJlZG8oKSkgIHtcblx0XHRcdFx0XHRcdHRoaXMuX29wZXJhdGlvbnMucmVkbygpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cblx0XHR0aGlzLmVsID0gd3JhcHBlcjtcblx0fVxuXG5cdHByaXZhdGUgY3JlYXRlVGFibGUoZ3JpZDogR3JpZCwgY29udHJvbDogUmVuZGVyZWRDb250cm9scyk6IEhUTUxUYWJsZUVsZW1lbnQge1xuXHRcdGNvbnN0IGNlbGxzID0gbmV3IE1hcChncmlkLmNlbGxzLm1hcChjID0+IFtgJHtjLnl9LCR7Yy54fWAsIGNdKSk7XG5cblx0XHRjb25zdCB0YWJsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RhYmxlJyk7XG5cdFx0Zm9yIChsZXQgeSA9IDA7IHkgPCBncmlkLkhFSUdIVDsgeSsrKSB7XG5cdFx0XHRjb25zdCB0ciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RyJyk7XG5cdFx0XHR0YWJsZS5hcHBlbmRDaGlsZCh0cik7XG5cblx0XHRcdGZvciAobGV0IHggPSAwOyB4IDwgZ3JpZC5XSURUSDsgeCsrKSB7XG5cdFx0XHRcdGNvbnN0IGNlbGwgPSBjZWxscy5nZXQoYCR7eX0sJHt4fWApIVxuXHRcdFx0XHRjb25zdCByZW5kZXJlZENlbGwgPSBuZXcgUmVuZGVyZWRDZWxsKGNlbGwsIGdyaWQsIHRoaXMuX29wZXJhdGlvbnMsIGNvbnRyb2wpO1xuXG5cdFx0XHRcdHJlbmRlcmVkQ2VsbC5yZWdpc3Rlck9uVmFsdWVDaGFuZ2VkKHRoaXMucmVmcmVzaFZhbGlkYXRpb24uYmluZCh0aGlzKSk7XG5cdFx0XHRcdHRoaXMuX3JlbmRlcmVkQ2VsbHMucHVzaChyZW5kZXJlZENlbGwpO1xuXHRcdFx0XHR0ci5hcHBlbmRDaGlsZChyZW5kZXJlZENlbGwuZWwpO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiB0YWJsZTtcblx0fVxuXG5cdHByaXZhdGUgcmVmcmVzaFZhbGlkYXRpb24oY2VsbDogUmVuZGVyZWRDZWxsKTogdm9pZCB7XG5cdFx0dGhpcy52YWxpZGF0ZVVuaXF1ZW5lc3ModGhpcy5fY2VsbHNCeVJvdy5nZXQoY2VsbC5yb3cpISwgJ3JvdycpO1xuXHRcdHRoaXMudmFsaWRhdGVVbmlxdWVuZXNzKHRoaXMuX2NlbGxzQnlDb2x1bW4uZ2V0KGNlbGwuY29sdW1uKSEsICdjb2x1bW4nKTtcblx0XHR0aGlzLnZhbGlkYXRlVW5pcXVlbmVzcyh0aGlzLl9jZWxsc0J5U2VjdGlvbi5nZXQoY2VsbC5zZWN0aW9uKSEsICdzZWN0aW9uJyk7XG5cdH1cblxuXHRwcml2YXRlIHZhbGlkYXRlVW5pcXVlbmVzcyhjZWxsczogUmVuZGVyZWRDZWxsW10sIGNvbGxlY3Rpb246ICdyb3cnIHwgJ2NvbHVtbicgfCAnc2VjdGlvbicpOiB2b2lkIHtcblx0XHRjb25zdCBjZWxsc0J5VmFsdWUgPSBncm91cEJ5KGNlbGxzLCAoeCkgPT4geC52YWx1ZSk7XG5cblx0XHRjZWxsc0J5VmFsdWUuZm9yRWFjaCgoZ3JvdXBpbmcsIHZhbHVlKSA9PiB7XG5cdFx0XHRpZiAodmFsdWUgIT09IG51bGwgJiYgZ3JvdXBpbmcubGVuZ3RoID4gMSkge1xuXHRcdFx0XHRncm91cGluZy5tYXAoeCA9PiB4LmVsKVxuXHRcdFx0XHRcdC5mb3JFYWNoKHggPT4geC5jbGFzc0xpc3QuYWRkKGBpbnZhbGlkLSR7Y29sbGVjdGlvbn1gKSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRncm91cGluZy5tYXAoeCA9PiB4LmVsKVxuXHRcdFx0XHRcdC5mb3JFYWNoKHggPT4geC5jbGFzc0xpc3QucmVtb3ZlKGBpbnZhbGlkLSR7Y29sbGVjdGlvbn1gKSk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH1cbn0iLCJpbXBvcnQgeyBHcmlkIH0gZnJvbSAnLi9ncmlkL2dyaWQnO1xuaW1wb3J0IHsgR3JpZEdlbmVyYXRvciB9IGZyb20gJy4vZ3JpZC9ncmlkLWdlbmVyYXRvcic7XG5pbXBvcnQgeyBKaWdzYXdHcmlkIH0gZnJvbSAnLi9ncmlkL2ppZ3Nhdy1ncmlkJztcbmltcG9ydCB7IFJlbmRlcmVkU3Vkb2t1R3JpZCB9IGZyb20gJy4vcmVuZGVyZXIvcmVuZGVyZWQtc3Vkb2t1LWdyaWQnO1xuXG5jb25zdCBNQVhfVFJZID0gMTAwO1xuXG5mdW5jdGlvbiBzeW5jKCk6IFByb21pc2U8dm9pZD4ge1xuXHRyZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgMCkpO1xufVxuXG5mdW5jdGlvbiBtYWluKCkge1xuXHRjb25zdCBnYW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dhbWUnKSE7XG5cdGNyZWF0ZUdhbWUoJ2NsYXNzaWNhbCcsIGdhbWUpO1xuXG5cdGNvbnN0IG5ld0NsYXNzaWNhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCduZXctZ2FtZS1jbGFzc2ljYWwnKSE7XG5cdG5ld0NsYXNzaWNhbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHNldFRpbWVvdXQoKCkgPT4gY3JlYXRlR2FtZSgnY2xhc3NpY2FsJywgZ2FtZSksIDApKTtcblxuXHRjb25zdCBuZXdKaWdzYXcgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbmV3LWdhbWUtamlnc2F3JykhO1xuXHRuZXdKaWdzYXcuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiBzZXRUaW1lb3V0KCgpID0+IGNyZWF0ZUdhbWUoJ2ppZ3NhdycsIGdhbWUpLCAwKSk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGNyZWF0ZUdhbWUoZ2FtZVR5cGU6ICdqaWdzYXcnIHwgJ2NsYXNzaWNhbCcsIGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpOiBQcm9taXNlPHZvaWQ+IHtcblx0Y29uc3Qgd2lkdGggPSA5O1xuXHRjb25zdCBoZWlnaHQgPSA5O1xuXHRjb25zdCBzZWN0aW9uQ291bnQgPSA5O1xuXG5cdGZvciAobGV0IGkgPSAxOyBpIDw9IE1BWF9UUlk7IGkrKykge1xuXHRcdGNvbnRhaW5lci5pbm5lckhUTUwgPSBgVHJ5aW5nIHRvIGdlbmVyYXRlIGEgZ3JpZDogJHtpfSBvZiAke01BWF9UUll9IHRyaWVzO2BcblxuXHRcdGF3YWl0IHN5bmMoKTtcblxuXHRcdGNvbnN0IGdyaWQgPSBnYW1lVHlwZSA9PT0gJ2ppZ3Nhdydcblx0XHRcdD8gbmV3IEppZ3Nhd0dyaWQod2lkdGgsIGhlaWdodCwgc2VjdGlvbkNvdW50KVxuXHRcdFx0OiBuZXcgR3JpZCh3aWR0aCwgaGVpZ2h0LCBzZWN0aW9uQ291bnQpO1xuXHRcdGNvbnN0IGdlbmVyYXRvciA9IG5ldyBHcmlkR2VuZXJhdG9yKCk7XG5cdFx0Y29uc3QgW2NhblNvbHZlLCBnZW5lcmF0ZWRdID0gZ2VuZXJhdG9yLmdlbmVyYXRlKGdyaWQpO1xuXG5cdFx0aWYgKCFjYW5Tb2x2ZSkge1xuXHRcdFx0Y29udGludWU7XG5cdFx0fVxuXG5cdFx0Y29uc3QgcmVuZGVyZWQgPSBuZXcgUmVuZGVyZWRTdWRva3VHcmlkKGdlbmVyYXRlZCk7XG5cdFx0Y29udGFpbmVyLmlubmVySFRNTCA9ICcnO1xuXHRcdGNvbnRhaW5lci5hcHBlbmRDaGlsZChyZW5kZXJlZC5lbCk7XG5cdFx0Y29uc29sZS5sb2coYEdlbmVyYXRlZCBhICR7Z3JpZC5jb25zdHJ1Y3Rvci5uYW1lfSBhZnRlciAke2l9IHRyaWVzLmApO1xuXHRcdHJldHVybjtcblx0fVxuXG5cdGNvbnRhaW5lci5pbm5lckhUTUwgPSBgRmFpbGVkIHRvIGdlbmVyYXRlIGEgJHtnYW1lVHlwZX0gZ3JpZCBhZnRlciAke01BWF9UUll9IHRyaWVzO2A7XG59XG5cblxuaWYgKGRvY3VtZW50LnJlYWR5U3RhdGUgPT09ICdsb2FkaW5nJykge1xuXHRkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgbWFpbik7XG59IGVsc2Uge1xuXHRtYWluKCk7XG59XG4iXSwibmFtZXMiOlsiQ2VsbCIsIngiLCJ5IiwiY29sdW1uIiwicm93Iiwic2VjdGlvbiIsInZhbHVlIiwiY29uc3RydWN0b3IiLCJ0aGlzIiwiYXZhaWxhYmxlVmFsdWVzIiwiaW50ZXJzZWN0Iiwic2V0VmFsdWUiLCJwb3BWYWx1ZSIsInVuc2V0VmFsdWUiLCJwdXNoVmFsdWUiLCJwb3NpdGlvbiIsIm9mZnNldFkiLCJvZmZzZXRYIiwicmFuZ2UiLCJzdGFydCIsImVuZCIsIkFycmF5IiwiZmlsbCIsIm1hcCIsIl8iLCJpIiwic2h1ZmZsZSIsImFycmF5IiwicmVzdWx0IiwiZnJvbSIsImxlbmd0aCIsImoiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJncm91cEJ5IiwiaXRlcmFibGUiLCJrZXlGdW5jIiwicmVkdWNlIiwiYWNjIiwiY3VycmVudCIsImluZGV4Iiwia2V5IiwiaGFzIiwiZ2V0IiwicHVzaCIsInNldCIsIk1hcCIsIkNlbGxDb2xsZWN0aW9uIiwib3JkIiwidmFsdWVDb3VudCIsIlJhbmdlU2V0IiwidW5zZXQiLCJyZXNldCIsImFyZ3MiLCJ0b0FycmF5IiwiX21pbmltdW0iLCJfbWF4aW11bSIsIl9zZXQiLCJtaW5pbXVtIiwibWF4aW11bSIsInNsaWNlIiwib3RoZXIiLCJfcmVzdWx0IiwiR3JpZCIsIldJRFRIIiwiSEVJR0hUIiwiU0VDVElPTl9DT1VOVCIsIl9jb2x1bW5zIiwiX3Jvd3MiLCJfc2VjdGlvbnMiLCJjZWxscyIsImNlbGxzQnlQb3NpdGlvbiIsIk1BWF9WQUxVRSIsIkVycm9yIiwiZmxhdE1hcCIsImNsb25lIiwib3JkZXJpbmciLCJhIiwiYiIsInNvcnQiLCJjZWxsIiwicHJldHR5Rm9ybWF0IiwiZ3JpZCIsInByZXR0eUZvcm1hdFNlY3Rpb24iLCJ2YWxpZFZhbHVlcyIsIklURVJBVElPTl9MSU1JVCIsIkdyaWRHZW5lcmF0b3IiLCJpdGVyYXRpb24iLCJnZW5lcmF0ZSIsImNhblNvbHZlIiwic29sdXRpb24iLCJzb2x2ZSIsImNhblNvbHZlT3RoZXJXYXkiLCJpbm5lclNvbHZlIiwidmFsdWVzIiwic2VsZWN0ZWRWYWx1ZSIsInNvbHZlZCIsIkRlZmF1bHRNYXAiLCJnZXRPckRlZmF1bHQiLCJmbiIsIkppZ3Nhd0dyaWQiLCJfY2VsbHNCeVNlY3Rpb24iLCJza2lwU2h1ZmZsZSIsInN1cGVyIiwiYWRkIiwiU2V0Iiwic2h1ZmZsZVNlY3Rpb25zIiwic2VjdGlvbk1hcHBpbmciLCJtYXhMZW5ndGgiLCJtYXgiLCJ6aXAiLCJzd2FwIiwic2VjdGlvbnMiLCJjZWxsc0J5TmVpZ2hib3VyaW5nU2VjdGlvbiIsImNlbGxzT2ZOZWlnaGJvdXJpbmdTZWN0aW9uIiwibmVpZ2hib3VyIiwibmVpZ2hib3VyaW5nQ2VsbHMiLCJjZWxsTmV4dFRvTmVpZ2hib3VyIiwic3dhcFNlY3Rpb25zIiwiaXNTZWN0aW9uQ29udGlndW91cyIsInVuZGVmaW5lZCIsImNlbGxzQnlTZWN0aW9uIiwidmlzaXRlZCIsInRvVmlzaXQiLCJuZXh0IiwicG9wIiwiZmlsdGVyIiwieXMiLCJ4cyIsInNpemUiLCJldmVyeSIsImRlbGV0ZSIsInRtcCIsIkFjdGlvbiIsIkNvbXBvc2l0ZUFjdGlvbiIsIl9hY3Rpb25zIiwiZG8iLCJ1bmRvIiwiT3BlcmF0aW9ucyIsIl9wcmV2aW91c2VzIiwiX25leHRzIiwiX2NhbGxiYWNrcyIsImNhblVuZG8iLCJhY3Rpb24iLCJvbkFjdGlvbkNvbXBsZXRlZCIsImNhblJlZG8iLCJyZWRvIiwic3BsaWNlIiwicmVnaXN0ZXJPbkFjdGlvbkNvbXBsZXRlZCIsImNhbGxiYWNrIiwiZm9yRWFjaCIsIkRvTm90aGluZ0FjdGlvbiIsInN0YXRpYyIsIk1hcmtpbmdBZGRBY3Rpb24iLCJfY2VsbCIsIl9tYXJraW5ncyIsImFkZE1hcmtpbmciLCJyZW1vdmVNYWtpbmciLCJSZW1vdmVNYXJraW5nQWN0aW9uIiwibWFya2luZ3MiLCJQZW5Xcml0ZUFjdGlvbiIsIl9udW1iZXIiLCJfcHJldmlvdXNOdW1iZXIiLCJ3cml0ZVZhbHVlIiwiUGVuRXJhc2VBY3Rpb24iLCJwcmV2aW91c051bWJlciIsIlNWR19OUyIsIlNWR0dlbmVyYXRvciIsImNyZWF0ZVNWRyIsInN2ZyIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudE5TIiwic2V0QXR0cmlidXRlIiwiY3JlYXRlUGVuY2lsTWFya2luZyIsIm1heFgiLCJtYXhZIiwidGV4dCIsImNsYXNzTGlzdCIsInRleHRDb250ZW50IiwiY3JlYXRlUGVuTWFya2luZyIsImltbXV0YWJsZSIsImNyZWF0ZUN1c3RvbVRleHQiLCJpbm5lckhUTUwiLCJSZW5kZXJlZENlbGwiLCJfZ3JpZCIsIl9vcGVyYXRpb25zIiwiX2NvbnRyb2wiLCJlbCIsIl9pc0NvbnN0YW50IiwiX29uVmFsdWVDaGFuZ2VkIiwiX3N2Z0dlbmVyYXRvciIsIl9zdmciLCJjcmVhdGVFbGVtZW50IiwiYXBwZW5kQ2hpbGQiLCJtYXJraW5nIiwiYWRkRXZlbnRMaXN0ZW5lciIsIm9uQ2xpY2siLCJiaW5kIiwicmVnaXN0ZXJPblZhbHVlQ2hhbmdlZCIsIm51bWJlciIsInJlbW92ZUNoaWxkIiwiY2hpbGROb2RlcyIsIm9uVmFsdWVDaGFuZ2VkIiwiZmlsbE1hcmtpbmdzQWN0aW9uIiwiSW5zdGFuY2UiLCJzZWxlY3RlZE51bWJlciIsImlzUGVuY2lsTWFya2luZyIsImtleXMiLCJjbGVhciIsIlJlbmRlcmVkQ29udHJvbHMiLCJfc2VsZWN0ZWROdW1iZXIiLCJfbnVtYmVycyIsInJlbW92ZSIsIl9pc1BlbmNpbE1hcmtpbmciLCJvcGVyYXRpb25zIiwib25GaWxsTWFya2luZ3MiLCJjb250cm9scyIsInBlbmNpbCIsImNyZWF0ZVBlbmNpbCIsImNyZWF0ZU51bWJlciIsInRpdGxlIiwiY3JlYXRlVW5kb0J1dHRvbiIsImNyZWF0ZVJlZG9CdXR0b24iLCJkaXNhYmxlZCIsImZpbGxNYXJraW5ncyIsImNyZWF0ZUZpbGxNYXJraW5ncyIsImFwcGVuZCIsInRvZ2dsZVBlbmNpbE1hcmtpbmciLCJ0b2dnbGUiLCJidXR0b24iLCJSZW5kZXJlZFN1ZG9rdUdyaWQiLCJfcmVuZGVyZWRDZWxscyIsIl9jZWxsc0J5Q29sdW1uIiwiX2NlbGxzQnlSb3ciLCJ0YWJsZSIsImNyZWF0ZVRhYmxlIiwid3JhcHBlciIsInRhYkluZGV4Iiwic3R5bGUiLCJzZXRQcm9wZXJ0eSIsImNlaWwiLCJlIiwicmVwZWF0IiwicHJldmVudERlZmF1bHQiLCJjdHJsS2V5IiwiY29udHJvbCIsImMiLCJ0ciIsInJlbmRlcmVkQ2VsbCIsInJlZnJlc2hWYWxpZGF0aW9uIiwidmFsaWRhdGVVbmlxdWVuZXNzIiwiY29sbGVjdGlvbiIsImdyb3VwaW5nIiwibWFpbiIsImdhbWUiLCJnZXRFbGVtZW50QnlJZCIsImNyZWF0ZUdhbWUiLCJzZXRUaW1lb3V0IiwiYXN5bmMiLCJnYW1lVHlwZSIsImNvbnRhaW5lciIsIlByb21pc2UiLCJyZXNvbHZlIiwiZ2VuZXJhdG9yIiwiZ2VuZXJhdGVkIiwicmVuZGVyZWQiLCJjb25zb2xlIiwibG9nIiwibmFtZSIsInJlYWR5U3RhdGUiXSwic291cmNlUm9vdCI6IiJ9